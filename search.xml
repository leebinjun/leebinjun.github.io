<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>Hexo：Hello Hexo 使用hexo+github搭建个人博客</title>
    <url>/2019/04/19/Hexo%EF%BC%9AHello%20Hexo/</url>
    <content><![CDATA[<p><strong> Hexo：Hello Hexo 使用hexo+github搭建个人博客 </strong> <excerpt in index | 首页摘要><br>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</excerpt></p>
<a id="more"></a>
<the rest of contents | 余下全文>

<h1 id="使用hexo-github搭建个人博客"><a href="#使用hexo-github搭建个人博客" class="headerlink" title="使用hexo+github搭建个人博客"></a>使用hexo+github搭建个人博客</h1><h2 id="准备"><a href="#准备" class="headerlink" title="准备"></a>准备</h2><ul>
<li>注册github账号</li>
</ul>
<p>安装软件</p>
<ul>
<li>git：版本控制系统，利用git可以将代码托管到github上<br><a href="http://git-scm.com/" target="_blank" rel="noopener">http://git-scm.com/</a></li>
<li>node.js：JavaScript 运行环境，npm是随同nodejs一起安装的包管理工具<br><a href="http://nodejs.org/" target="_blank" rel="noopener">http://nodejs.org/</a></li>
</ul>
<p>查看是否安装成功</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ git --version</span><br><span class="line">git version 2.28.0.windows.1</span><br><span class="line">$ npm -v</span><br><span class="line">6.14.6</span><br><span class="line">$ node -v</span><br><span class="line">v12.18.3</span><br></pre></td></tr></table></figure>
<h2 id="部署"><a href="#部署" class="headerlink" title="部署"></a>部署</h2><h3 id="安装hexo"><a href="#安装hexo" class="headerlink" title="安装hexo"></a>安装hexo</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ npm install hexo-cli -g</span><br><span class="line"></span><br><span class="line">安装hexo-deployer-git工具</span><br><span class="line">$ npm install hexo-deployer-git --save</span><br><span class="line"></span><br><span class="line">npm install 慢的话 显示当前的镜像网址</span><br><span class="line">$ npm get registry </span><br><span class="line">使用淘宝的镜像网址</span><br><span class="line">$ npm config <span class="built_in">set</span> registry http://registry.npm.taobao.org</span><br></pre></td></tr></table></figure>
<h3 id="静态博客搭建"><a href="#静态博客搭建" class="headerlink" title="静态博客搭建"></a>静态博客搭建</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo init blog</span><br><span class="line">$ <span class="built_in">cd</span> blog</span><br><span class="line">$ npm install</span><br><span class="line">$ hexo s</span><br></pre></td></tr></table></figure>
<p>浏览器访问：<a href="http://localhost:4000/" target="_blank" rel="noopener">http://localhost:4000/</a><br>按Ctrl+C停止</p>
<h3 id="配置到GitHub"><a href="#配置到GitHub" class="headerlink" title="配置到GitHub"></a>配置到GitHub</h3><p>在github上创建仓库，仓库名称为：用户名.github.io<br>配置blog\_config.yml中的deploy</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">deploy:</span></span><br><span class="line"><span class="attr">  type:</span> <span class="string">git</span></span><br><span class="line"><span class="attr">  repo:</span> <span class="string">git@github.com:your_github_user_name/your_github_user_name.github.io.git</span></span><br><span class="line"><span class="attr">  branch:</span> <span class="string">master</span></span><br></pre></td></tr></table></figure>
<p>在远程仓库配置SSH公钥来进行认证</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">验证ssh key</span><br><span class="line">$ ssh -T git@github.com</span><br><span class="line"></span><br><span class="line">在本地hexo init生成的文件夹中初始化git仓库</span><br><span class="line">$ git init</span><br><span class="line"></span><br><span class="line">将本地仓库和远程仓库连接</span><br><span class="line">$ git remote add origin git@github.com:your_github_user_name/your_github_user_name.github.io.git</span><br></pre></td></tr></table></figure>
<h3 id="网站部署"><a href="#网站部署" class="headerlink" title="网站部署"></a>网站部署</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span>   //新建页面</span><br><span class="line">$ cls                      //清屏</span><br><span class="line">$ hexo clean               //清除缓存文件db.json和已生成的静态文件public</span><br><span class="line">$ hexo g(generate)         //生成网站静态文件到默认设置的public文件夹</span><br><span class="line">$ hexo s(server)           //开启服务器预览网址</span><br><span class="line">$ hexo d(deploy)           //部署网站到设定的仓库</span><br></pre></td></tr></table></figure>
<p>hexo其他命令</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$ hexo help                   查看帮助</span><br><span class="line">$ hexo version                查看Hexo的版本</span><br></pre></td></tr></table></figure>
<h2 id="主题"><a href="#主题" class="headerlink" title="主题"></a>主题</h2><h3 id="挑选主题"><a href="#挑选主题" class="headerlink" title="挑选主题"></a>挑选主题</h3><ul>
<li>Themes | Hexo <a href="https://hexo.io/themes/" target="_blank" rel="noopener">https://hexo.io/themes/</a></li>
<li>Themes · hexojs/hexo Wiki <a href="https://github.com/hexojs/hexo/wiki/Themes" target="_blank" rel="noopener">https://github.com/hexojs/hexo/wiki/Themes</a></li>
</ul>
<p>常用的主题是next主题。</p>
<h2 id="添加主题"><a href="#添加主题" class="headerlink" title="添加主题"></a>添加主题</h2><p>复制主题到themes目录下</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> themes &amp;&amp; git <span class="built_in">clone</span> https://github.com/maochunguang/black-blue(主题地址)</span><br></pre></td></tr></table></figure>
<p>配置blog\_config.yml，修改对应主题目录名</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">theme:</span> <span class="string">主题名称</span></span><br></pre></td></tr></table></figure>
<h2 id="绑定域名"><a href="#绑定域名" class="headerlink" title="绑定域名"></a>绑定域名</h2><h3 id="在域名的解析设置中添加记录"><a href="#在域名的解析设置中添加记录" class="headerlink" title="在域名的解析设置中添加记录"></a>在域名的解析设置中添加记录</h3><p><img src="/2019/04/19/Hexo：Hello Hexo/000.png"></p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">参数</th>
<th style="text-align:left">值</th>
<th style="text-align:left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">记录类型</td>
<td style="text-align:left">CNAME</td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">主机记录</td>
<td style="text-align:left">@</td>
<td style="text-align:left">域名前缀 @直接解析主域名</td>
</tr>
<tr>
<td style="text-align:left">解析路线</td>
<td style="text-align:left">默认</td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">记录值</td>
<td style="text-align:left">your_github_user_name.github.io</td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">TTL</td>
<td style="text-align:left">10分钟</td>
<td style="text-align:left">缓存时间</td>
</tr>
</tbody>
</table>
</div>
<h3 id="在github添加自定义域名"><a href="#在github添加自定义域名" class="headerlink" title="在github添加自定义域名"></a>在github添加自定义域名</h3><p><img src="/2019/04/19/Hexo：Hello Hexo/001.png"></p>
<h3 id="配置hexo的-config-yml"><a href="#配置hexo的-config-yml" class="headerlink" title="配置hexo的_config.yml"></a>配置hexo的_config.yml</h3><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># URL</span></span><br><span class="line"><span class="comment">## If your site is put in a subdirectory, set url as 'http://yoursite.com/child' and root as '/child/'</span></span><br><span class="line"><span class="attr">url:</span> <span class="attr">http://www.yoursite.com</span></span><br><span class="line"><span class="attr">root:</span> <span class="string">/</span></span><br><span class="line"><span class="attr">permalink:</span> <span class="string">:year/:month/:day/:title/</span></span><br><span class="line"><span class="attr">permalink_defaults:</span></span><br></pre></td></tr></table></figure>
<h3 id="上传CNAME文件"><a href="#上传CNAME文件" class="headerlink" title="上传CNAME文件"></a>上传CNAME文件</h3><p>在/hexo/source目录下，新建一个CNAME文件，内容为域名，上传更新</p>
<h1 id="Hexo：主题-插入图片-代码折叠等使用技巧"><a href="#Hexo：主题-插入图片-代码折叠等使用技巧" class="headerlink" title="Hexo：主题/插入图片/代码折叠等使用技巧"></a>Hexo：主题/插入图片/代码折叠等使用技巧</h1><h2 id="插入图片"><a href="#插入图片" class="headerlink" title="插入图片"></a>插入图片</h2><h3 id="设置"><a href="#设置" class="headerlink" title="设置"></a>设置</h3><p>配置blog\_config.yml</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">post_asset_folder:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>
<p>安装插件<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install hexo-asset-image --save</span><br></pre></td></tr></table></figure></p>
<p>html语法<br><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">align</span>=<span class="string">center</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">alt</span>=<span class="string">"title"</span> <span class="attr">src</span> = <span class="string">"path to xxx.png"</span> <span class="attr">width</span>=<span class="string">999</span> <span class="attr">height</span>=<span class="string">999</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>上传图片前可以压缩一下  </p>
<ul>
<li>在线压缩图片,在线无损压缩图片-BeJSON.com<br><a href="http://www.bejson.com/ui/compress_img/" target="_blank" rel="noopener">http://www.bejson.com/ui/compress_img/</a></li>
</ul>
<h2 id="markdonw代码折叠"><a href="#markdonw代码折叠" class="headerlink" title="markdonw代码折叠"></a>markdonw代码折叠</h2><p>折叠代码：<br><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">details</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">summary</span>&gt;</span>点击查看Code<span class="tag">&lt;/<span class="name">summary</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">    测试</span><br><span class="line">    <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">pre</span>&gt;</span><span class="tag">&lt;<span class="name">code</span>&gt;</span></span><br><span class="line">    for i in a:</span><br><span class="line">        print(i)</span><br><span class="line">    <span class="tag">&lt;/<span class="name">code</span>&gt;</span><span class="tag">&lt;/<span class="name">pre</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">details</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>效果如下：</p>
<details>
    <summary>点击查看Code</summary>
    <p>
    测试
    </p>
    <pre><code>
    for i in a:
        print(i)
    </code></pre>
</details>


<h2 id="代码折叠"><a href="#代码折叠" class="headerlink" title="代码折叠"></a>代码折叠</h2><p>目前使用以下脚本  </p>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
<meta charset="utf-8"> 
<title>title_test</title> 
<script src="https://cdn.staticfile.org/jquery/1.10.2/jquery.min.js">
</script>
<script>
$(document).ready(function(){
    $(document).on('click', '.fold_hider', function(){
        $('>.fold', this.parentNode).slideToggle();
        $('>:first', this).toggleClass('open');
    });
    $("div.fold").css("display","none");
});
</script>
</head>
<body>
<div>
    <div class="fold_hider">
        <div class="close hider_title">点击显示/隐藏代码</div>
    </div>
    <div class="fold">
        <figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>title_test<span class="tag">&lt;/<span class="name">title</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.staticfile.org/jquery/1.10.2/jquery.min.js"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">$(document).ready(function()&#123;</span></span><br><span class="line"><span class="undefined">    $(document).on('click', '.fold_hider', function()&#123;</span></span><br><span class="line"><span class="undefined">        $('&gt;.fold', this.parentNode).slideToggle();</span></span><br><span class="line"><span class="undefined">        $('&gt;:first', this).toggleClass('open');</span></span><br><span class="line"><span class="undefined">    &#125;);</span></span><br><span class="line"><span class="undefined">    $("div.fold").css("display","none");</span></span><br><span class="line"><span class="undefined">&#125;);</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"fold_hider"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"close hider_title"</span>&gt;</span>点击显示/隐藏代码<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"fold"</span>&gt;</span></span><br><span class="line">        要隐藏的部分</span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

    </div>
</div>
<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"jsonPath":"/live2dw/assets/wanko.model.json"},"display":{"position":"right","width":200,"height":400,"hOffset":50,"vOffset":-95},"mobile":{"show":false},"react":{"opacity":0.7},"log":false});</script></body>
</html>

<ul>
<li>如何配置才能让hexo搭建的博客中的代码实现折叠功能？ - 知乎<br><a href="https://www.zhihu.com/question/66271897" target="_blank" rel="noopener">https://www.zhihu.com/question/66271897</a></li>
</ul>
<ul>
<li>如何在Hexo中对文章md文件分类 - 貌似掉线的博客 - CSDN博客<br><a href="https://blog.csdn.net/maosidiaoxian/article/details/85220394" target="_blank" rel="noopener">https://blog.csdn.net/maosidiaoxian/article/details/85220394</a></li>
</ul>
<h2 id="引入自定义-js-文件"><a href="#引入自定义-js-文件" class="headerlink" title="引入自定义 js 文件"></a>引入自定义 js 文件</h2><p>在画交互图时需要引入 echarts.min.js 文件，文件可以放在以下文件夹</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">themes/yilia/source/js</span><br></pre></td></tr></table></figure>
<p>将 js 放到其中，在 markdown 文章中直接引用即可</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">src</span>=<span class="string">"/js/test.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h1 id="Hexo：yilia主题下添加背景音乐播放器"><a href="#Hexo：yilia主题下添加背景音乐播放器" class="headerlink" title="Hexo：yilia主题下添加背景音乐播放器"></a>Hexo：yilia主题下添加背景音乐播放器</h1><h2 id="配置config文件"><a href="#配置config文件" class="headerlink" title="配置config文件"></a>配置config文件</h2><p>在站点根目录下的_config.yml中添加如下配置</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">aplayer:</span></span><br><span class="line"><span class="attr">  enanble:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>
<h2 id="添加播放器样式"><a href="#添加播放器样式" class="headerlink" title="添加播放器样式"></a>添加播放器样式</h2><p>修改themes/yilia/layout/_partial/left-col.ejs文件，添加下面代码</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">%</span> <span class="attr">if</span>(<span class="attr">theme.aplayer.enable</span>) &#123; %&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.css"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- // 这里div的样式是笔者自己修改过的，你可以直接使用APlayer官方的原配置： --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"aplayer"</span> <span class="attr">style</span>=<span class="string">"position:absolute;left:0;top:0;"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.jsdelivr.net/npm/color-thief-don@2.0.2/src/color-thief.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">        const ap = new APlayer(&#123;</span></span><br><span class="line"><span class="undefined">        container: document.getElementById('aplayer'),</span></span><br><span class="line"><span class="undefined">        autoplay: false, //自动播放</span></span><br><span class="line"><span class="undefined">        listFolded: true, //播放列表默认折叠</span></span><br><span class="line"><span class="undefined">        listMaxHeight: 90, //播放列表最大高度</span></span><br><span class="line"><span class="undefined">        order: 'list', //音频循环顺序, 可选值: 'list', 'random'</span></span><br><span class="line"><span class="undefined">        loop: 'all', //音频循环播放, 可选值: 'all', 'one', 'none'</span></span><br><span class="line"><span class="undefined">        theme: '#e9e9e9', //切换音频时的主题色，优先级低于audio.theme</span></span><br><span class="line"><span class="undefined">        preload: 'none', //音频预加载，可选值: 'none', 'metadata', 'auto'</span></span><br><span class="line"><span class="undefined">        mutex: true, //互斥，阻止多个播放器同时播放，当前播放器播放时暂停其他播放器</span></span><br><span class="line"><span class="undefined">        lrcType: 3, //歌词格式，可选值：3（LRC文件歌词格式），1（JS字符串歌词格式）</span></span><br><span class="line"><span class="undefined">        volume: 0.7, //默认音量，请注意播放器会记忆用户设置，用户手动设置音量后默认音量即失效</span></span><br><span class="line"><span class="undefined">        // mini: true,</span></span><br><span class="line"><span class="undefined">        // fixed: true, //吸底模式（fixed:true），迷你模式（mini:true），普通模式（注释此行或者设置fixed:false）</span></span><br><span class="line"><span class="undefined">        audio: [</span></span><br><span class="line"><span class="undefined">        &#123;</span></span><br><span class="line"><span class="undefined">            name: 'City Of Stars',</span></span><br><span class="line"><span class="undefined">            artist: 'Ryan Gosling',</span></span><br><span class="line"><span class="undefined">            lrc: 'data:application/octet-stream;base64,WzAwOjE5LjgyXUNpdHkgb2Ygc3RhcnMsClswMDoyMy4wMV1hcmUgeW91IHNoaW5pbmcganVzdCBmb3IgbWU/ClswMDoyOS42NV1DaXR5IG9mIHN0YXJzLApbMDA6MzIuNzRddGhlcmUncyBzbyBtdWNoIHRoYXQgSSBjYW4ndCBzZWUuClswMDozOS4yOF1XaG8ga25vd3MsClswMDo0Mi4zN11pcyB0aGlzIHRoZSBzdGFydCBvZiBzb21ldGhpbmcgd29uZGVyZnVsIGFuZCBuZXcsClswMDo0OS42Nl1vciBvbmUgbW9yZSBkcmVhbSB0aGF0IEkgY2Fubm90IG1ha2UgdHJ1ZT8K',</span></span><br><span class="line"><span class="undefined">            cover: 'https://p4.music.126.net/zqGxChorQDtXQxNoT45hww==/3426078245816925.jpg?param=300x300',</span></span><br><span class="line"><span class="undefined">            url: 'https://music.163.com/song/media/outer/url?id=421203025.mp3'</span></span><br><span class="line"><span class="undefined">        &#125;,</span></span><br><span class="line"><span class="undefined">        ]</span></span><br><span class="line"><span class="undefined">        &#125;);</span></span><br><span class="line"><span class="undefined">    </span></span><br><span class="line"><span class="undefined">        //实现切换音频时，根据音频的封面图片自适应主题色</span></span><br><span class="line"><span class="undefined">        const colorThief = new ColorThief();</span></span><br><span class="line"><span class="undefined">        const setTheme = (index) =&gt; &#123;</span></span><br><span class="line"><span class="undefined">        if (!ap.list.audios[index].theme) &#123;</span></span><br><span class="line"><span class="undefined">            colorThief.getColorAsync(ap.list.audios[index].cover, function(color) &#123;</span></span><br><span class="line"><span class="undefined">            ap.theme(`rgb($&#123;color[0]&#125;, $&#123;color[1]&#125;, $&#123;color[2]&#125;)`, index);</span></span><br><span class="line"><span class="undefined">            &#125;);</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined">        &#125;;</span></span><br><span class="line"><span class="undefined">        setTheme(ap.list.index);</span></span><br><span class="line"><span class="undefined">        ap.on('listswitch', (data) =&gt; &#123;</span></span><br><span class="line"><span class="undefined">        setTheme(data.index);</span></span><br><span class="line"><span class="undefined">        &#125;);</span></span><br><span class="line"><span class="undefined">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">%</span> &#125; %&gt;</span></span><br></pre></td></tr></table></figure>
<p>其中歌曲的url为如下格式,xxx处替换相应的id号</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">https://music.163.com/song/media/outer/url?id=xxxxxxxxx.mp3</span><br></pre></td></tr></table></figure>
<p>歌曲的歌词文件lrc和封面地址cover可以通过<a href="https://music.liuzhijin.cn/" target="_blank" rel="noopener">音乐直链搜索工具</a>获取。</p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><p>Hexo 全局添加 APlayer 音乐播放器 | Clay的技术博客<br><a href="https://www.techgrow.cn/posts/cfdad023.html" target="_blank" rel="noopener">https://www.techgrow.cn/posts/cfdad023.html</a></p>
</li>
<li><p>音乐直链搜索|音乐在线试听 - by 刘志进实验室<br><a href="https://music.liuzhijin.cn/" target="_blank" rel="noopener">https://music.liuzhijin.cn/</a></p>
</li>
<li><p>如何获取网易云音乐播放外链 - 知乎<br><a href="https://zhuanlan.zhihu.com/p/104569759" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/104569759</a></p>
</li>
</ul>
<h1 id="Hexo：yilia主题下添加live2d看板动画"><a href="#Hexo：yilia主题下添加live2d看板动画" class="headerlink" title="Hexo：yilia主题下添加live2d看板动画"></a>Hexo：yilia主题下添加live2d看板动画</h1><div align="center">
<img src="/2019/04/19/Hexo：Hello Hexo/002.png">
</div>

<!-- more -->
<the rest of contents | 余下全文>

<h2 id="安装依赖项"><a href="#安装依赖项" class="headerlink" title="安装依赖项"></a>安装依赖项</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ npm install --save hexo-helper-live2d</span><br></pre></td></tr></table></figure>
<h2 id="下载模型"><a href="#下载模型" class="headerlink" title="下载模型"></a>下载模型</h2><ul>
<li>hexo live2d插件 2.0 ! | 幻想帖<br><a href="https://huaji8.top/post/live2d-plugin-2.0/" target="_blank" rel="noopener">https://huaji8.top/post/live2d-plugin-2.0/</a></li>
</ul>
<p>选好对应的模型，使用 “npm install 模型的包名” 来安装<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ npm install live2d-widget-model-wanko</span><br></pre></td></tr></table></figure></p>
<h2 id="配置信息"><a href="#配置信息" class="headerlink" title="配置信息"></a>配置信息</h2><p>在主题下的_config.yml文件中添加相关配置信息<br><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">live2d:</span></span><br><span class="line"><span class="attr">  enable:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">  scriptFrom:</span> <span class="string">local</span></span><br><span class="line"><span class="attr">  pluginRootPath:</span> <span class="string">live2dw/</span></span><br><span class="line"><span class="attr">  pluginJsPath:</span> <span class="string">lib/</span></span><br><span class="line"><span class="attr">  pluginModelPath:</span> <span class="string">assets/</span></span><br><span class="line"><span class="attr">  tagMode:</span> <span class="literal">false</span></span><br><span class="line"><span class="attr">  debug:</span> <span class="literal">false</span></span><br><span class="line"><span class="attr">  model:</span></span><br><span class="line"><span class="attr">    use:</span> <span class="string">live2d-widget-model-wanko</span></span><br><span class="line"><span class="attr">  display:</span></span><br><span class="line"><span class="attr">    position:</span> <span class="string">right</span></span><br><span class="line"><span class="attr">    width:</span> <span class="number">200</span> <span class="comment"># 宽度</span></span><br><span class="line"><span class="attr">    height:</span> <span class="number">400</span> <span class="comment"># 高度</span></span><br><span class="line"><span class="attr">    hOffset:</span> <span class="number">50</span> <span class="comment">#水平偏移</span></span><br><span class="line"><span class="attr">    vOffset:</span> <span class="bullet">-95</span> <span class="comment">#垂直偏移</span></span><br><span class="line"><span class="attr">  mobile:</span></span><br><span class="line"><span class="attr">    show:</span> <span class="literal">false</span> <span class="comment"># 在移动端取消显示</span></span><br><span class="line"><span class="attr">  react:</span></span><br><span class="line"><span class="attr">    opacity:</span> <span class="number">0.7</span></span><br></pre></td></tr></table></figure></p>
<h1 id="Hexo：yilia主题下添加相册功能"><a href="#Hexo：yilia主题下添加相册功能" class="headerlink" title="Hexo：yilia主题下添加相册功能"></a>Hexo：yilia主题下添加相册功能</h1><p>参考Lawlite的博客 </p>
<ul>
<li>Hexo+Github实现相册功能 | Lawlite的博客<br><a href="http://www.lawlite.me/2017/04/13/Hexo-Github%E5%AE%9E%E7%8E%B0%E7%9B%B8%E5%86%8C%E5%8A%9F%E8%83%BD/" target="_blank" rel="noopener">http://www.lawlite.me/2017/04/13/Hexo-Github%E5%AE%9E%E7%8E%B0%E7%9B%B8%E5%86%8C%E5%8A%9F%E8%83%BD/</a></li>
</ul>
<h2 id="创建图床，用于储存相册"><a href="#创建图床，用于储存相册" class="headerlink" title="创建图床，用于储存相册"></a>创建图床，用于储存相册</h2><p>在leebinjun.github.io仓库新建data分支，专门用于存储图片。<br><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">git branch data</span><br><span class="line">git checkout data</span><br></pre></td></tr></table></figure></p>
<p>在data分支创建photos_backup文件夹，用于作为图床存放相册图片。</p>
<p>在photos文件夹放入原始图片，运行py文件处理原图，在min_photos文件夹生成图标文件，并生成data.json文件。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">cut_photo</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="string">"""裁剪算法</span></span><br><span class="line"><span class="string">    ----------</span></span><br><span class="line"><span class="string">    调用Graphics类中的裁剪算法，将src_dir目录下的文件复制到des_dir下裁剪成正方形</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    src_dir, des_dir = <span class="string">"photos_backup/photos/"</span>, <span class="string">"photos_backup/min_photos/"</span></span><br><span class="line">    <span class="keyword">if</span> directory_exists(src_dir) <span class="keyword">and</span> directory_exists(des_dir):</span><br><span class="line">        file_list = list_img_file(src_dir)</span><br><span class="line">        file_list_des = list_img_file(des_dir)</span><br><span class="line">        <span class="comment"># print file_list</span></span><br><span class="line">        <span class="keyword">if</span> file_list:</span><br><span class="line">            <span class="keyword">for</span> infile <span class="keyword">in</span> file_list:</span><br><span class="line">                <span class="keyword">if</span> infile <span class="keyword">not</span> <span class="keyword">in</span> file_list_des:</span><br><span class="line">                    img = Image.open(src_dir+infile)</span><br><span class="line">                    g = Graphics(infile=src_dir+infile, outfile=des_dir+infile)</span><br><span class="line">                    g.cut_by_ratio()</span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    file_list.remove(infile)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">pass</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        print(<span class="string">"source directory not exist!"</span>)     </span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 进行压缩</span></span><br><span class="line">    compress(<span class="string">'4'</span>, des_dir, des_dir, file_list)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</span><br><span class="line">    </span><br><span class="line">    print_help()</span><br><span class="line">    resize_photo()       <span class="comment"># 压缩图片，不大于1080P，保存到photos文件夹下</span></span><br><span class="line">    cut_photo()          <span class="comment"># 裁剪图片，裁剪成正方形,并压缩，保存到mini_photos文件夹下</span></span><br><span class="line">    <span class="comment"># git_operation()    # 提交到github仓库</span></span><br><span class="line">    handle_photo()       <span class="comment"># 将文件处理成json格式，存到博客仓库中</span></span><br></pre></td></tr></table></figure>
<h2 id="博客操作"><a href="#博客操作" class="headerlink" title="博客操作"></a>博客操作</h2><p>在博客的source文件夹下建立一个photos文件夹<br><figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line">hexo new page photos</span><br></pre></td></tr></table></figure></p>
<p>由于之前hexo插入图片对blog\_config.yml进行过配置</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">post_asset_folder:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>
<p>photos文件夹会自动生成一个index.md文件和一个同名文件夹</p>
<p>清空photos文件夹，放入相关样式文件，如下</p>
<ul>
<li>leebinjun.github.io/source/photos at dev · leebinjun/leebinjun.github.io<br><a href="https://github.com/leebinjun/leebinjun.github.io/tree/dev/source/photos" target="_blank" rel="noopener">https://github.com/leebinjun/leebinjun.github.io/tree/dev/source/photos</a></li>
</ul>
<!-- <img src = "Hexo：yilia主题下添加相册功能\0.png"> -->
<p><img src="/2019/04/19/Hexo：Hello Hexo/003.png"></p>
<p>修改ins.js文件，主要render函数相关路径<br><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> render = <span class="function"><span class="keyword">function</span> <span class="title">render</span>(<span class="params">res</span>) </span>&#123;</span><br><span class="line">     <span class="keyword">var</span> ulTmpl = <span class="string">""</span>;</span><br><span class="line">     <span class="keyword">for</span> (<span class="keyword">var</span> j = <span class="number">0</span>, len2 = res.list.length; j &lt; len2; j++) &#123;</span><br><span class="line">       <span class="keyword">var</span> data = res.list[j].arr;</span><br><span class="line">       <span class="keyword">var</span> liTmpl = <span class="string">""</span>;</span><br><span class="line">       <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>, len = data.link.length; i &lt; len; i++) &#123;</span><br><span class="line"></span><br><span class="line">         <span class="keyword">var</span> minSrc = <span class="string">'https://raw.githubusercontent.com/leebinjun/leebinjun.github.io/data/photos_backup/min_photos/'</span> + data.link[i];</span><br><span class="line">         <span class="keyword">var</span> src = <span class="string">'https://raw.githubusercontent.com/leebinjun/leebinjun.github.io/data/photos_backup/photos/'</span> + data.link[i];</span><br><span class="line">         <span class="keyword">var</span> type = data.type[i];</span><br><span class="line">         <span class="comment">// var target = src + (type === 'video' ? '.mp4' : '.jpg');</span></span><br><span class="line">         <span class="keyword">var</span> target = src;</span><br><span class="line">         <span class="comment">// src += '.jpg';</span></span><br><span class="line"></span><br><span class="line">         liTmpl += <span class="string">'&lt;figure class="thumb" itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject"&gt;\</span></span><br><span class="line"><span class="string">               &lt;a href="'</span> + src + <span class="string">'" itemprop="contentUrl" data-size="640x640" data-type="'</span> + type + <span class="string">'" data-target="'</span> + target + <span class="string">'"&gt;\</span></span><br><span class="line"><span class="string">                 &lt;img class="reward-img" data-type="'</span> + type + <span class="string">'" data-src="'</span> + minSrc + <span class="string">'" src="empty.png" itemprop="thumbnail" onload="lzld(this)"&gt;\</span></span><br><span class="line"><span class="string">               &lt;/a&gt;\</span></span><br><span class="line"><span class="string">               &lt;figcaption style="display:none" itemprop="caption description"&gt;'</span> + data.text[i] + <span class="string">'&lt;/figcaption&gt;\</span></span><br><span class="line"><span class="string">           &lt;/figure&gt;'</span>;</span><br><span class="line">       &#125;</span><br><span class="line">       ulTmpl = ulTmpl + <span class="string">'&lt;section class="archives album"&gt;&lt;h1 class="year"&gt;'</span> + data.year + <span class="string">'&lt;em&gt;'</span> + data.month + <span class="string">'月&lt;/em&gt;&lt;/h1&gt;\</span></span><br><span class="line"><span class="string">       &lt;ul class="img-box-ul"&gt;'</span> + liTmpl + <span class="string">'&lt;/ul&gt;\</span></span><br><span class="line"><span class="string">       &lt;/section&gt;'</span>;</span><br><span class="line">     &#125;</span><br><span class="line">     <span class="built_in">document</span>.querySelector(<span class="string">'.instagram'</span>).innerHTML = <span class="string">'&lt;div class="photos" itemscope="" itemtype="http://schema.org/ImageGallery"&gt;'</span> + ulTmpl + <span class="string">'&lt;/div&gt;'</span>;</span><br><span class="line">     createVideoIncon();</span><br><span class="line">     _view2.default.init();</span><br><span class="line">   &#125;;</span><br></pre></td></tr></table></figure></p>
<p>修改ins.json文件，与data分支中由python脚本生成的data.json同步<br><figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;<span class="attr">"list"</span>: [&#123;<span class="attr">"date"</span>: <span class="string">"2020-01"</span>, <span class="attr">"arr"</span>: &#123;<span class="attr">"year"</span>: <span class="number">2020</span>, <span class="attr">"month"</span>: <span class="number">1</span>, <span class="attr">"link"</span>: [<span class="string">"2020-01-04_\u6d4b\u8bd5.jpg"</span>], <span class="attr">"text"</span>: [<span class="string">"\u6d4b\u8bd5"</span>], <span class="attr">"type"</span>: [<span class="string">"image"</span>]&#125;&#125;]&#125;</span><br></pre></td></tr></table></figure></p>
<p>配置themes\yilia\_config.yml文件，在侧边栏添加相册<br><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Header</span></span><br><span class="line"><span class="attr">menu:</span></span><br><span class="line">  <span class="string">主页:</span> <span class="string">/</span></span><br><span class="line">  <span class="string">相册:</span> <span class="string">/photos/</span></span><br><span class="line">  <span class="string">随笔:</span> <span class="string">/tags/随笔/</span></span><br></pre></td></tr></table></figure></p>
</the></the>]]></content>
      <tags>
        <tag>hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>元胞自动机与空间演化博弈</title>
    <url>/2019/11/12/%E6%95%B0%E6%A8%A1%EF%BC%9A%E5%85%83%E8%83%9E%E8%87%AA%E5%8A%A8%E6%9C%BA%E4%B8%8E%E7%A9%BA%E9%97%B4%E6%BC%94%E5%8C%96%E5%8D%9A%E5%BC%88/</url>
    <content><![CDATA[<p><img src="/2019/11/12/数模：元胞自动机与空间演化博弈/203.gif">  </p>
<a id="more"></a>
<the rest of contents | 余下全文>

<h1 id="Cellular-Automata-amp-Monte-Carlo-（元胞自动机及蒙特卡罗方法）"><a href="#Cellular-Automata-amp-Monte-Carlo-（元胞自动机及蒙特卡罗方法）" class="headerlink" title="Cellular Automata &amp; Monte Carlo （元胞自动机及蒙特卡罗方法）"></a>Cellular Automata &amp; Monte Carlo （元胞自动机及蒙特卡罗方法）</h1><!-- <img src="数模：元胞自动机\00.png"> -->
<p><img src="/2019/11/12/数模：元胞自动机与空间演化博弈/100.png">  </p>
<h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><ul>
<li>时间、空间都离散的动力系统</li>
<li>不同于数学方程模型，由一系列模型构造的规则构成的方法框架。</li>
<li>特点：时间、空间、状态离散。</li>
<li>用简单的逻辑规则，给出一种随时间演化的动力学模型，使之能模拟复杂系统。</li>
</ul>
<h2 id="元胞自动机"><a href="#元胞自动机" class="headerlink" title="元胞自动机"></a>元胞自动机</h2><h3 id="历史"><a href="#历史" class="headerlink" title="历史"></a>历史</h3><ul>
<li>20世纪50年代，John von Neumann 最早提出；</li>
<li>1970年，John Conway 提出生命游戏 (Conway, J. (1970). In M. Gardner, (Ed.), Scientific American, 223(4), pp. 120-123.)</li>
<li>1983年，Stephen Wolfram 初等元胞自动机(Stephen Wolfram. Reviews of Modern Physics,1983, Vol.55)</li>
<li>1986年至今，理论及应用</li>
</ul>
<h3 id="一维元胞自动机"><a href="#一维元胞自动机" class="headerlink" title="一维元胞自动机"></a>一维元胞自动机</h3><p>一维格子：长为$L$的线段，$L$等份，得$L$个格子，构成一维格子。</p>
<p>格子的状态</p>
<ul>
<li>每个格子有两种状态，且状态是随时间变化的。     </li>
<li>将$i$格子在$t$时刻的状态记为 $x_{i}^{t}$ ，规定<script type="math/tex; mode=display">
x_{i}^{t}=\left\{\begin{array}{l}{0} \\ {1}\end{array}, i=1,2, \cdots \cdots, L\right.</script></li>
</ul>
<p>状态的更新机制</p>
<script type="math/tex; mode=display">
x_{i}^{t+1}=f\left(x_{i-1}^{t}, x_{i}^{t}, x_{i+1}^{t}\right), \quad i=1,2, \cdots \cdots, L</script><p>采用周期边界</p>
<h3 id="时空图"><a href="#时空图" class="headerlink" title="时空图"></a>时空图</h3><p>L=100， 初值取$x_{i}^{0}=\left\{\begin{array}{ll}{1} &amp; {i=50} \ {0} &amp; {i \neq 50}\end{array}\right.$<br>用白色表示0状态，用黑色表示1状态。<br>对给定规则，演化100时间步，可得如下结构时空图</p>
<!-- <img src="数模：元胞自动机\01.png"> -->
<p><img src="/2019/11/12/数模：元胞自动机与空间演化博弈/101.png">  </p>
<h3 id="二维元胞自动机"><a href="#二维元胞自动机" class="headerlink" title="二维元胞自动机"></a>二维元胞自动机</h3><p>二维格子：将边长为L的正方形，每边L等份得到的L*L个格子。</p>
<p>格子状态：将$(i,j)$格子在$t$时刻的状态记为 $x_{i, j}^{t}$, $(i,j)$ 格子状态的种类由具体问题确定</p>
<p>格子的邻居</p>
<ul>
<li>Von Neumann 邻居   </li>
<li>Moore邻居</li>
</ul>
<p>状态更新机制：</p>
<script type="math/tex; mode=display">
x_{i, j}^{t+1}=f\left(x_{i-1, j}^{t}, x_{i+1, j}^{t} x_{i, j}^{t}, x_{i, j-1}^{t}, x_{i, j+1}^{t}\right)</script><p>其中 $i, j=1,2, \cdots \cdots, L$</p>
<p>采用周期边界  </p>
<p>元胞自动机方法</p>
<ul>
<li>对每个格子，制定状态改变的局部规则。</li>
<li>采用同步更新的方法，进行状态更新。</li>
</ul>
<h2 id="蒙特卡洛方法"><a href="#蒙特卡洛方法" class="headerlink" title="蒙特卡洛方法"></a>蒙特卡洛方法</h2><p>随机选定格子</p>
<ul>
<li>对格子及其邻居制定状态改变的局部规则。</li>
<li>采用异步更新的方法，进行状态更新。</li>
<li>Monte-Carlo步与时间步</li>
<li>Monte-Carlo步：按局部规则完成的一次更新为一个Monte-Carlo步</li>
<li>时间步：对 $L*L$ 格子，一般 $L^2$ 个Monte-Carlo步为一个时间步</li>
</ul>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><ul>
<li>在$L*L$格子上，规定每个格子的状态种类数</li>
<li>根据具体问题背景，通过制定局部规则，建立格子状态的更新机制，通过计算机模拟研究相应系统的演化规律。</li>
<li>局部规则可采用元胞自动机方法或蒙特卡洛方法。</li>
<li>元胞自动机方法通过局部规则改变一个格子的状态，且所有格子同步更新。</li>
<li>蒙特卡洛方法通过局部规则以随机确定格子的方法，改变该格子及其局部的状态。</li>
</ul>
<h2 id="实验：元胞自动机时空图"><a href="#实验：元胞自动机时空图" class="headerlink" title="实验：元胞自动机时空图"></a>实验：元胞自动机时空图</h2><p>CODE<br><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">元胞自动机时空图 Python 实现</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line">%matplotlib inline</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CellularAutomata</span><span class="params">(object)</span>:</span></span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, cells_lenth, rules=None)</span>:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        Parameters</span></span><br><span class="line"><span class="string">        ----------</span></span><br><span class="line"><span class="string">        cells_lenth : 一维元胞自动机长度</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        Examples</span></span><br><span class="line"><span class="string">        --------</span></span><br><span class="line"><span class="string">        创建一个长度为100的一位格子</span></span><br><span class="line"><span class="string">        ca =  CellularAutomata(100)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># 矩阵的四周不参与运算</span></span><br><span class="line">        self.lenth = cells_lenth</span><br><span class="line">        self.n_iter = <span class="number">101</span> <span class="comment"># 演化次数</span></span><br><span class="line">        self.timer = <span class="number">0</span>    <span class="comment"># 当前迭代次数</span></span><br><span class="line">        <span class="keyword">if</span> rules:</span><br><span class="line">            self.rules = rules</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            self.rules = &#123;(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>):<span class="number">1</span>, (<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>):<span class="number">1</span>, (<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>):<span class="number">1</span>, (<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>):<span class="number">1</span>,</span><br><span class="line">                          (<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>):<span class="number">0</span>, (<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>):<span class="number">0</span>, (<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>):<span class="number">0</span>, (<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>):<span class="number">0</span>&#125; <span class="comment"># 定义演化规则</span></span><br><span class="line">        self.cells = np.zeros((cells_lenth, self.n_iter))</span><br><span class="line">        self.cells[<span class="number">0</span>, int(cells_lenth/<span class="number">2</span>)] = <span class="number">1</span> </span><br><span class="line">        </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">update_state</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="string">"""更新一次状态"""</span></span><br><span class="line">        i = self.timer + <span class="number">1</span> <span class="comment"># 当前要更新的行</span></span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> range(self.lenth):</span><br><span class="line">            <span class="comment"># 计算该细胞周围的存活细胞数</span></span><br><span class="line">            (x, y, z) = (self.cells[i<span class="number">-1</span>, (j<span class="number">-1</span>+self.lenth)%self.lenth],</span><br><span class="line">                         self.cells[i<span class="number">-1</span>, j],</span><br><span class="line">                         self.cells[i<span class="number">-1</span>, (j+<span class="number">1</span>+self.lenth)%self.lenth])</span><br><span class="line">            self.cells[i, j] = self.rules[(x,y,z)]</span><br><span class="line">        self.timer += <span class="number">1</span></span><br><span class="line">   </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">plot_state</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="string">"""画出当前的状态"""</span></span><br><span class="line">        plt.title(<span class="string">'Iter :&#123;&#125;'</span>.format(self.timer))</span><br><span class="line">        plt.imshow(self.cells)</span><br><span class="line">        plt.show()</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">update_and_plot</span><span class="params">(self, n_iter)</span>:</span></span><br><span class="line">        <span class="string">"""更新状态并画图</span></span><br><span class="line"><span class="string">        Parameters</span></span><br><span class="line"><span class="string">        ----------</span></span><br><span class="line"><span class="string">        n_iter : 更新的轮数</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        plt.ion()</span><br><span class="line">        <span class="keyword">for</span> _ <span class="keyword">in</span> range(n_iter):</span><br><span class="line">            plt.title(<span class="string">'Iter :&#123;&#125;'</span>.format(self.timer))</span><br><span class="line">            plt.imshow(self.cells)</span><br><span class="line">            self.update_state()</span><br><span class="line">            plt.pause(<span class="number">0.000001</span>)</span><br><span class="line">        plt.ioff()</span><br><span class="line">        </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">update</span><span class="params">(self, n_iter)</span>:</span></span><br><span class="line">        <span class="string">"""更新状态并画图</span></span><br><span class="line"><span class="string">        Parameters</span></span><br><span class="line"><span class="string">        ----------</span></span><br><span class="line"><span class="string">        n_iter : 更新的轮数</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        <span class="keyword">for</span> _ <span class="keyword">in</span> range(n_iter):</span><br><span class="line">            self.update_state()</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    plt.figure(figsize=(<span class="number">16</span>,<span class="number">8</span>))</span><br><span class="line"></span><br><span class="line">    rules_list = [</span><br><span class="line">        &#123;(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>):<span class="number">1</span>, (<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>):<span class="number">1</span>, (<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>):<span class="number">1</span>, (<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>):<span class="number">1</span>,</span><br><span class="line">         (<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>):<span class="number">0</span>, (<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>):<span class="number">0</span>, (<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>):<span class="number">0</span>, (<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>):<span class="number">0</span>&#125;, </span><br><span class="line">        &#123;(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>):<span class="number">1</span>, (<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>):<span class="number">0</span>, (<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>):<span class="number">1</span>, (<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>):<span class="number">1</span>,</span><br><span class="line">         (<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>):<span class="number">0</span>, (<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>):<span class="number">1</span>, (<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>):<span class="number">0</span>, (<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>):<span class="number">0</span>&#125;, </span><br><span class="line">        &#123;(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>):<span class="number">0</span>, (<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>):<span class="number">1</span>, (<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>):<span class="number">0</span>, (<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>):<span class="number">0</span>,</span><br><span class="line">         (<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>):<span class="number">0</span>, (<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>):<span class="number">1</span>, (<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>):<span class="number">0</span>, (<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>):<span class="number">1</span>&#125;, </span><br><span class="line">        &#123;(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>):<span class="number">1</span>, (<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>):<span class="number">0</span>, (<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>):<span class="number">1</span>, (<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>):<span class="number">1</span>,</span><br><span class="line">         (<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>):<span class="number">0</span>, (<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>):<span class="number">0</span>, (<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>):<span class="number">1</span>, (<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>):<span class="number">0</span>&#125;, </span><br><span class="line">        &#123;(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>):<span class="number">0</span>, (<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>):<span class="number">1</span>, (<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>):<span class="number">1</span>, (<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>):<span class="number">0</span>,</span><br><span class="line">         (<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>):<span class="number">0</span>, (<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>):<span class="number">1</span>, (<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>):<span class="number">0</span>, (<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>):<span class="number">1</span>&#125;, </span><br><span class="line">        &#123;(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>):<span class="number">0</span>, (<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>):<span class="number">0</span>, (<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>):<span class="number">1</span>, (<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>):<span class="number">1</span>,</span><br><span class="line">         (<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>):<span class="number">0</span>, (<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>):<span class="number">1</span>, (<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>):<span class="number">1</span>, (<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>):<span class="number">1</span>&#125;, </span><br><span class="line">        &#123;(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>):<span class="number">1</span>, (<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>):<span class="number">0</span>, (<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>):<span class="number">0</span>, (<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>):<span class="number">1</span>,</span><br><span class="line">         (<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>):<span class="number">1</span>, (<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>):<span class="number">1</span>, (<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>):<span class="number">0</span>, (<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>):<span class="number">1</span>&#125;, </span><br><span class="line">        &#123;(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>):<span class="number">1</span>, (<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>):<span class="number">0</span>, (<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>):<span class="number">1</span>, (<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>):<span class="number">0</span>,</span><br><span class="line">         (<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>):<span class="number">0</span>, (<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>):<span class="number">0</span>, (<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>):<span class="number">1</span>, (<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>):<span class="number">0</span>&#125;, </span><br><span class="line">    ]</span><br><span class="line">    cas = [CellularAutomata(<span class="number">100</span>, rules) <span class="keyword">for</span> rules <span class="keyword">in</span> rules_list]</span><br><span class="line">    <span class="keyword">for</span> i,ca <span class="keyword">in</span> enumerate(cas):</span><br><span class="line">        ca.update(<span class="number">99</span>)</span><br><span class="line">        plt.subplot(<span class="number">2</span>,<span class="number">4</span>,i+<span class="number">1</span>)</span><br><span class="line">        plt.imshow(ca.cells)</span><br><span class="line">        plt.axis(<span class="string">'off'</span>)  <span class="comment">#去掉坐标轴</span></span><br></pre></td></tr></table></figure></p>
<p>结果<br><!-- <img src="数模：元胞自动机\02.png"> --><br><img src="/2019/11/12/数模：元胞自动机与空间演化博弈/102.png">  </p>
<h1 id="空间博弈演化-Evolutionary-games-and-spatial-chaos"><a href="#空间博弈演化-Evolutionary-games-and-spatial-chaos" class="headerlink" title="空间博弈演化 Evolutionary games and spatial chaos"></a>空间博弈演化 Evolutionary games and spatial chaos</h1><p><img src="/2019/11/12/数模：元胞自动机与空间演化博弈/01.png">  </p>
<!-- more -->
<the rest of contents | 余下全文>

<h2 id="Prisoner’s-dilemma-——-囚徒困境"><a href="#Prisoner’s-dilemma-——-囚徒困境" class="headerlink" title="Prisoner’s dilemma —— 囚徒困境"></a>Prisoner’s dilemma —— 囚徒困境</h2><h3 id="出处"><a href="#出处" class="headerlink" title="出处"></a>出处</h3><p>1950年，由就职于兰德公司的梅里尔·弗勒德（Merrill Flood）和梅尔文·德雷希尔（Melvin Dresher）拟定出相关困境的理论。<br>后来由顾问艾伯特·塔克（Albert Tucker）以囚徒方式阐述，并命名为“囚徒困境”。</p>
<h3 id="描述"><a href="#描述" class="headerlink" title="描述"></a>描述</h3><p>两个嫌疑犯作案后被警察抓住，分别关在不同的屋子里接受审讯。<br>警察知道两人有罪，但缺乏足够的证据。<br>警察告诉每个人：<br>如果两人都抵赖，各判刑一年；<br>如果两人都坦白，各判八年；<br>如果两人中一个坦白而另一个抵赖，坦白的放出去，抵赖的判十年。<br>怎么决策？  </p>
<h3 id="困境所在"><a href="#困境所在" class="headerlink" title="困境所在"></a>困境所在</h3><p>每个囚徒面临两种选择：坦白或抵赖。<br>不管同伙如何选择，自己的最优选择是坦白：<br>如果同伙抵赖：自己坦白的话放出去，不坦白的话判一年，坦白比不坦白好；<br>如果同伙坦白：自己坦白的话判八年，不坦白的话判十年，坦白还是比不坦白好。<br>两个嫌疑犯都选择坦白，各判刑八年。<br>如果两人都抵赖，各判一年，显然这个结果好。<br>囚徒困境反映出的深刻问题：人类的个人理性有时能导致集体的非理性。  </p>
<h3 id="行为和策略"><a href="#行为和策略" class="headerlink" title="行为和策略"></a>行为和策略</h3><p>个体的行为：</p>
<ul>
<li>坦白</li>
<li>抵赖</li>
</ul>
<p>行为由策略决定：</p>
<ul>
<li>合作：cooperate (C)——抵赖</li>
<li>背叛：defect (D)——坦白  </li>
</ul>
<p>个体间进行博弈，其策略组合对应着收益</p>
<h3 id="收益矩阵（Payoff-Matrix）"><a href="#收益矩阵（Payoff-Matrix）" class="headerlink" title="收益矩阵（Payoff Matrix）"></a>收益矩阵（Payoff Matrix）</h3><div class="table-container">
<table>
<thead>
<tr>
<th></th>
<th>C</th>
<th>D</th>
</tr>
</thead>
<tbody>
<tr>
<td>C</td>
<td>(-1,-1)</td>
<td>(-10,0)</td>
</tr>
<tr>
<td>D</td>
<td>(0,-10)</td>
<td>(-8,-8)</td>
</tr>
</tbody>
</table>
</div>
<div class="table-container">
<table>
<thead>
<tr>
<th></th>
<th>C</th>
<th>D</th>
</tr>
</thead>
<tbody>
<tr>
<td>C</td>
<td>R</td>
<td>S</td>
</tr>
<tr>
<td>D</td>
<td>T</td>
<td>P</td>
</tr>
</tbody>
</table>
</div>
<ul>
<li>T&gt;R&gt;P&gt;S</li>
<li>2R&gt;T+S</li>
</ul>
<p>Nowak的单参数收益矩阵</p>
<div class="table-container">
<table>
<thead>
<tr>
<th></th>
<th>C</th>
<th>D</th>
</tr>
</thead>
<tbody>
<tr>
<td>C</td>
<td>1</td>
<td>0</td>
</tr>
<tr>
<td>D</td>
<td>b</td>
<td>0</td>
</tr>
</tbody>
</table>
</div>
<p>其中1&lt;b&lt;2，b为背叛诱惑</p>
<h2 id="Evolution-of-cooperation-behavior"><a href="#Evolution-of-cooperation-behavior" class="headerlink" title="Evolution of cooperation behavior"></a>Evolution of cooperation behavior</h2><h3 id="策略的变化规则"><a href="#策略的变化规则" class="headerlink" title="策略的变化规则"></a>策略的变化规则</h3><p>将个体置于L×L网格上，周期边界<br>每个格子一个个体<br>初始时每个个体按比例（C、D的比例）赋予具体策略<br>每一时刻，每个个体和邻居（4或8）及自身进行博弈，得到每个个体的总收益<br>下一时刻个体的策略将以此为基础进行改变  </p>
<p>策略改变的规则： 每个个体选择自身及其邻居中收益值最高的那个个体的策略，作为下一时刻该个体的策略</p>
<p>每个个体策略的更新过程是同步进行的</p>
<h2 id="Using-an-efficient-computer-program"><a href="#Using-an-efficient-computer-program" class="headerlink" title="Using an efficient computer program"></a>Using an efficient computer program</h2><p>对给定的收益矩阵，及初始时个体的策略，可以通过计算机编程实现上述策略更新过程。<br>从而可以知道每一时刻合作者的数量。</p>
<h2 id="实验：基于二维元胞自动机的”囚徒困境”模型"><a href="#实验：基于二维元胞自动机的”囚徒困境”模型" class="headerlink" title="实验：基于二维元胞自动机的”囚徒困境”模型"></a>实验：基于二维元胞自动机的”囚徒困境”模型</h2><h3 id="参数设定及程序思路"><a href="#参数设定及程序思路" class="headerlink" title="参数设定及程序思路"></a>参数设定及程序思路</h3><ul>
<li>预处理中，定义格子行数和列数为L，背叛诱惑为B，时间步为Step。  </li>
<li>格子策略由二维整型数组a[L][L]记录保存，通过先计算b[L][L]再赋值给a[L][L]保证格子状态同步更新.利用整型变量i j表示格子a[i][j]的位置，i为行数，j为列数。  </li>
<li>规则判断中由整型变量count计算邻居中合作者个数，并通过条件判断a[i][j]的策略，计算这一时刻它的收益值保存到二维浮点变量p[i][j]中。通过变量n比较收益大小，通过变量m保存收益大者的策略，并将其赋给t+1时刻个体的策略a[i][j]。</li>
<li>整型二维数组c[L][L]用于记录个体每一时刻决策的变化情况，它有四个值：1表示由背叛变为背叛，2表示由背叛变为合作，3表示由合作变为背叛，4表示由合作变为合作。</li>
<li>程序将输出策略时空图state.txt文件中，输出收益时空图到payoff.txt文件中，输出策略变化时空图到change.txt文件中。</li>
<li>在Matlab中导入change.txt文件转化为矩阵A。通过for循环，使用矩阵B获取矩阵A中表示每一步策略状态时空图的小矩阵。依次绘制B的图像并保存画面到矩阵m中，并利用系统提供的函数movie2avi导出.avi格式文件。</li>
</ul>
<h3 id="程序"><a href="#程序" class="headerlink" title="程序"></a>程序</h3><p>数据生成<br><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> L 100               <span class="comment">//游戏规模</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> step 300            <span class="comment">//演化步</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> B 1.93              <span class="comment">//背叛诱惑</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> a[L][L],b[L][L];      <span class="comment">//策略时空图</span></span><br><span class="line">    <span class="keyword">float</span> p[L][L];          <span class="comment">//收益时空图</span></span><br><span class="line">    <span class="keyword">int</span> c[L][L];            <span class="comment">//变化时空图</span></span><br><span class="line">    <span class="keyword">float</span> fc=<span class="number">0</span>;            <span class="comment">//合作频率</span></span><br><span class="line">    <span class="keyword">int</span> tmp_m;           <span class="comment">//临时变量用于存放取得最大收益的策略</span></span><br><span class="line">    <span class="keyword">float</span> tmp_n;          <span class="comment">//临时变量用于存放最大收益值</span></span><br><span class="line">    <span class="keyword">int</span> i,j,t,count=<span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    FILE *fp1,*fp2,*fp3,*fp4;</span><br><span class="line">    fp1=fopen(<span class="string">"strange.txt"</span>,<span class="string">"w"</span>);</span><br><span class="line">    fp2=fopen(<span class="string">"payoff.txt"</span>,<span class="string">"w"</span>);</span><br><span class="line">    fp3=fopen(<span class="string">"change.txt"</span>,<span class="string">"w"</span>);</span><br><span class="line">    fp4=fopen(<span class="string">"fc.txt"</span>,<span class="string">"w"</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;L;i++)         <span class="comment">//初始条件：60%合作者随机分布</span></span><br><span class="line">        <span class="keyword">for</span>(j=<span class="number">0</span>;j&lt;L;j++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">switch</span>(rand()%<span class="number">10</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">0</span>:<span class="keyword">case</span> <span class="number">1</span>:<span class="keyword">case</span> <span class="number">2</span>:<span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line">                    a[i][j]=b[i][j]=<span class="number">0</span>;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">default</span>:</span><br><span class="line">                    a[i][j]=b[i][j]=<span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="keyword">for</span>(t=<span class="number">0</span>;t&lt;step;t++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;L;i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">for</span>(j=<span class="number">0</span>;j&lt;L;j++)</span><br><span class="line">            &#123;</span><br><span class="line">                count=<span class="number">0</span>;</span><br><span class="line">                <span class="keyword">if</span>(a[(i<span class="number">-1</span>+L)%L][(j<span class="number">-1</span>+L)%L]==<span class="number">1</span>) count++;</span><br><span class="line">                <span class="keyword">if</span>(a[(i<span class="number">-1</span>+L)%L][j]==<span class="number">1</span>) count++;</span><br><span class="line">                <span class="keyword">if</span>(a[(i<span class="number">-1</span>+L)%L][(j+<span class="number">1</span>+L)%L]==<span class="number">1</span>) count++;</span><br><span class="line">                <span class="keyword">if</span>(a[i][(j<span class="number">-1</span>+L)%L]==<span class="number">1</span>) count++;</span><br><span class="line">                <span class="keyword">if</span>(a[i][j]==<span class="number">1</span>) count++;</span><br><span class="line">                <span class="keyword">if</span>(a[i][(j+<span class="number">1</span>+L)%L]==<span class="number">1</span>) count++;</span><br><span class="line">                <span class="keyword">if</span>(a[(i+<span class="number">1</span>+L)%L][(j<span class="number">-1</span>+L)%L]==<span class="number">1</span>) count++;</span><br><span class="line">                <span class="keyword">if</span>(a[(i+<span class="number">1</span>+L)%L][j]==<span class="number">1</span>) count++;</span><br><span class="line">                <span class="keyword">if</span>(a[(i+<span class="number">1</span>+L)%L][(j+<span class="number">1</span>+L)%L]==<span class="number">1</span>) count++;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span>(a[i][j]==<span class="number">1</span>)</span><br><span class="line">                    p[i][j]=<span class="number">1</span>*count;</span><br><span class="line">                <span class="keyword">else</span></span><br><span class="line">                    p[i][j]=B*count;                <span class="comment">//计算收益</span></span><br><span class="line">                <span class="built_in">fprintf</span>(fp2,<span class="string">"%3.2f "</span>,p[i][j]);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="built_in">fprintf</span>(fp2,<span class="string">"\n"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;L;i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">for</span>(j=<span class="number">0</span>;j&lt;L;j++)</span><br><span class="line">            &#123;</span><br><span class="line">                tmp_m=tmp_n=<span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span>(p[(i<span class="number">-1</span>+L)%L][(j<span class="number">-1</span>+L)%L]&gt;tmp_n)</span><br><span class="line">                    tmp_n=p[(i<span class="number">-1</span>+L)%L][(j<span class="number">-1</span>+L)%L],</span><br><span class="line">                    tmp_m=a[(i<span class="number">-1</span>+L)%L][(j<span class="number">-1</span>+L)%L];</span><br><span class="line">                <span class="keyword">if</span>(p[(i<span class="number">-1</span>+L)%L][j]&gt;tmp_n)</span><br><span class="line">                    tmp_n=p[(i<span class="number">-1</span>+L)%L][j],tmp_m=a[(i<span class="number">-1</span>+L)%L][j];</span><br><span class="line">                <span class="keyword">if</span>(p[(i<span class="number">-1</span>+L)%L][(j+<span class="number">1</span>+L)%L]&gt;tmp_n) </span><br><span class="line">                    tmp_n=p[(i<span class="number">-1</span>+L)%L][(j+<span class="number">1</span>+L)%L], </span><br><span class="line">                    tmp_m=a[(i<span class="number">-1</span>+L)%L][(j+<span class="number">1</span>+L)%L];</span><br><span class="line">                <span class="keyword">if</span>(p[i][(j<span class="number">-1</span>+L)%L]&gt;tmp_n) </span><br><span class="line">                    tmp_n=p[i][(j<span class="number">-1</span>+L)%L],tmp_m=a[i][(j<span class="number">-1</span>+L)%L];</span><br><span class="line">                <span class="keyword">if</span>(p[i][j]&gt;tmp_n)</span><br><span class="line">                    tmp_n=p[i][j],tmp_m=a[i][j];</span><br><span class="line">                <span class="keyword">if</span>(p[i][(j+<span class="number">1</span>+L)%L]&gt;tmp_n) </span><br><span class="line">                    tmp_n=p[i][(j+<span class="number">1</span>+L)%L],tmp_m=a[i][(j+<span class="number">1</span>+L)%L];</span><br><span class="line">                <span class="keyword">if</span>(p[(i+<span class="number">1</span>+L)%L][(j<span class="number">-1</span>+L)%L]&gt;tmp_n)</span><br><span class="line">                    tmp_n=p[(i+<span class="number">1</span>+L)%L][(j<span class="number">-1</span>+L)%L],</span><br><span class="line">                    tmp_m=a[(i+<span class="number">1</span>+L)%L][(j<span class="number">-1</span>+L)%L];</span><br><span class="line">                <span class="keyword">if</span>(p[(i+<span class="number">1</span>+L)%L][j]&gt;tmp_n)</span><br><span class="line">                    tmp_n=p[(i+<span class="number">1</span>+L)%L][j],tmp_m=a[(i+<span class="number">1</span>+L)%L][j];</span><br><span class="line">                <span class="keyword">if</span>(p[(i+<span class="number">1</span>+L)%L][(j+<span class="number">1</span>+L)%L]&gt;tmp_n)</span><br><span class="line">                    tmp_n=p[(i+<span class="number">1</span>+L)%L][(j+<span class="number">1</span>+L)%L],</span><br><span class="line">                    tmp_m=a[(i+<span class="number">1</span>+L)%L][(j+<span class="number">1</span>+L)%L];</span><br><span class="line"></span><br><span class="line">                b[i][j]=tmp_m;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;L;i++)                       <span class="comment">//统计策略变化情况</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">for</span>(j=<span class="number">0</span>;j&lt;L;j++)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span> (a[i][j]==<span class="number">0</span>&amp;&amp;b[i][j]==<span class="number">0</span>)</span><br><span class="line">                    c[i][j]=<span class="number">1</span>;</span><br><span class="line">                <span class="keyword">else</span> <span class="keyword">if</span> (a[i][j]==<span class="number">0</span>&amp;&amp;b[i][j]==<span class="number">1</span>)</span><br><span class="line">                    c[i][j]=<span class="number">2</span>;</span><br><span class="line">                <span class="keyword">else</span> <span class="keyword">if</span> (a[i][j]==<span class="number">1</span>&amp;&amp;b[i][j]==<span class="number">0</span>)</span><br><span class="line">                    c[i][j]=<span class="number">3</span>;</span><br><span class="line">                <span class="keyword">else</span> <span class="keyword">if</span>(a[i][j]==<span class="number">1</span>&amp;&amp;b[i][j]==<span class="number">1</span>)</span><br><span class="line">                    c[i][j]=<span class="number">4</span>;</span><br><span class="line">                a[i][j]=b[i][j];</span><br><span class="line"></span><br><span class="line">            <span class="built_in">fprintf</span>(fp1,<span class="string">"%d "</span>,a[i][j]);</span><br><span class="line">            <span class="built_in">fprintf</span>(fp3,<span class="string">"%d "</span>,c[i][j]);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="built_in">fprintf</span>(fp1,<span class="string">"\n"</span>);<span class="built_in">fprintf</span>(fp3,<span class="string">"\n"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        count=<span class="number">0</span>;                    <span class="comment">//计算合作频率</span></span><br><span class="line">        <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;L;i++)</span><br><span class="line">            <span class="keyword">for</span>(j=<span class="number">0</span>;j&lt;L;j++)</span><br><span class="line">                count+=a[i][j];</span><br><span class="line">        fc=(<span class="keyword">float</span>)count/<span class="number">10000</span>;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%lf"</span>,fc);</span><br><span class="line">        <span class="built_in">fprintf</span>(fp4,<span class="string">"%lf\n"</span>,fc);</span><br><span class="line"></span><br><span class="line">        <span class="built_in">fprintf</span>(fp1,<span class="string">"\n"</span>);<span class="built_in">fprintf</span>(fp2,<span class="string">"\n"</span>);<span class="built_in">fprintf</span>(fp3,<span class="string">"\n"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>使用matlab绘图<br><figure class="highlight matlab"><table><tr><td class="code"><pre><span class="line">&gt;&gt;load change.txt                   <span class="comment">%载入文件</span></span><br><span class="line">&gt;&gt;A = importdata (<span class="string">'change.txt'</span>);     <span class="comment">%转化为矩阵A</span></span><br><span class="line">&gt;&gt;m = moviein (<span class="number">100</span>);                 <span class="comment">%建立一个100个列向量组成的矩阵</span></span><br><span class="line">&gt;&gt;<span class="keyword">for</span>   <span class="built_in">i</span> = <span class="number">1</span>:<span class="number">100</span>                    <span class="comment">%绘制每一幅策略改变图并保存到矩阵m中</span></span><br><span class="line">k = <span class="number">100</span>*<span class="built_in">i</span><span class="number">-99</span>;</span><br><span class="line">n = <span class="number">100</span>*<span class="built_in">i</span>;</span><br><span class="line">b = A(k:n,<span class="number">1</span>:<span class="number">100</span>);</span><br><span class="line">imagesc(b);</span><br><span class="line">m(:,<span class="built_in">i</span>)=getframe;</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">&gt;&gt;movie2avi(m,<span class="string">'C:\二维演化.avi'</span>,<span class="string">'compression'</span>,<span class="string">'none'</span>);    <span class="comment">%导出.avi格式文件</span></span><br></pre></td></tr></table></figure></p>
<h3 id="结果"><a href="#结果" class="headerlink" title="结果"></a>结果</h3><p><img src="/2019/11/12/数模：元胞自动机与空间演化博弈/02.png">  </p>
<p>当 1.8 &lt; b &lt; 2 时，初始分布仅为99×99的网格中央有一个背叛者，上图依次为第30、90、150、200时间步个体策略变化情况。其中棕色代表合作者坚持合作，蓝色代表背叛者坚持背叛，黄色代表合作者选择背叛，青色代表背叛者选择合作。</p>
<p><img src="/2019/11/12/数模：元胞自动机与空间演化博弈/03.png">  </p>
<p>当 1.8 &lt; b &lt; 2 时，在60%的合作者的随机初始分布的条件下，合作频率在300个时间步内的变化。</p>
<p><img src="/2019/11/12/数模：元胞自动机与空间演化博弈/04.png">   </p>
<p>当 1.8 &lt; b &lt; 2 时，初始条件为90%的合作者随机分布，在200×200的方格中模拟，最终稳定时策略变化图。  </p>
<p><img src="/2019/11/12/数模：元胞自动机与空间演化博弈/05.png">   </p>
<p>当 1.75 &lt; b &lt; 1.8 时，初始条件为90%的合作者随机分布，在200×200的方格中模拟，最终稳定时策略变化图。</p>
<h1 id="空间博弈与matplotlib绘制gif动图"><a href="#空间博弈与matplotlib绘制gif动图" class="headerlink" title="空间博弈与matplotlib绘制gif动图"></a>空间博弈与matplotlib绘制gif动图</h1><!-- <img src="数模：空间博弈与matplotlib绘制gif动图\03.gif"> -->
<p><img src="/2019/11/12/数模：元胞自动机与空间演化博弈/203.gif">  </p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 独立窗口显示</span></span><br><span class="line">%matplotlib qt5 </span><br><span class="line"><span class="comment"># %matplotlib inline # 取消matplotlib的独立窗口显示</span></span><br></pre></td></tr></table></figure>
<!-- more -->
<the rest of contents | 余下全文>

<h2 id="Python实现元胞自动机"><a href="#Python实现元胞自动机" class="headerlink" title="Python实现元胞自动机"></a>Python实现元胞自动机</h2><ul>
<li>详解Python 实现元胞自动机中的生命游戏(Game of life)_python_脚本之家<br><a href="https://www.jb51.net/article/133807.htm" target="_blank" rel="noopener">https://www.jb51.net/article/133807.htm</a></li>
</ul>
<p>问题重述</p>
<ul>
<li>个体位于L*L网络上，网络无周期边界。  </li>
<li>每个格子一个个体，有0或1两种状态，0为死亡，1为存活。  </li>
<li>依据Moore邻居的状态决定个体下一时刻的状态：如果相邻方格活着的细胞数量过多，这个细胞会因为资源匮乏而在下一个时刻死去；相反，如果周围活细胞过少，这个细胞会因太孤单而死去。  </li>
<li>每个个体的状态更新是同步进行的。</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">元胞自动机 Python 实现</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">GameOfLife</span><span class="params">(object)</span>:</span></span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, cells_shape)</span>:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        Parameters</span></span><br><span class="line"><span class="string">        ----------</span></span><br><span class="line"><span class="string">        cells_shape : 一个元组，表示画布的大小。</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        Examples</span></span><br><span class="line"><span class="string">        --------</span></span><br><span class="line"><span class="string">        建立一个高20，宽30的画布</span></span><br><span class="line"><span class="string">        game = GameOfLife((20, 30))</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># 矩阵的四周不参与运算</span></span><br><span class="line">        self.cells = np.zeros(cells_shape)</span><br><span class="line"></span><br><span class="line">        real_width = cells_shape[<span class="number">0</span>] - <span class="number">2</span></span><br><span class="line">        real_height = cells_shape[<span class="number">1</span>] - <span class="number">2</span></span><br><span class="line"></span><br><span class="line">        self.cells[<span class="number">1</span>:<span class="number">-1</span>, <span class="number">1</span>:<span class="number">-1</span>] = np.random.randint(<span class="number">2</span>, size=(real_width, real_height))</span><br><span class="line">        self.timer = <span class="number">0</span></span><br><span class="line">        self.mask = np.ones(<span class="number">9</span>)</span><br><span class="line">        self.mask[<span class="number">4</span>] = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">update_state</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="string">"""更新一次状态"""</span></span><br><span class="line">        buf = np.zeros(self.cells.shape)</span><br><span class="line">        cells = self.cells</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>, cells.shape[<span class="number">0</span>] - <span class="number">1</span>):</span><br><span class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> range(<span class="number">1</span>, cells.shape[<span class="number">0</span>] - <span class="number">1</span>):</span><br><span class="line">                <span class="comment"># 计算该细胞周围的存活细胞数</span></span><br><span class="line">                neighbor = cells[i<span class="number">-1</span>:i+<span class="number">2</span>, j<span class="number">-1</span>:j+<span class="number">2</span>].reshape((<span class="number">-1</span>, ))</span><br><span class="line">                neighbor_num = np.convolve(self.mask, neighbor, <span class="string">'valid'</span>)[<span class="number">0</span>]</span><br><span class="line">                <span class="keyword">if</span> neighbor_num == <span class="number">3</span>:</span><br><span class="line">                    buf[i, j] = <span class="number">1</span></span><br><span class="line">                <span class="keyword">elif</span> neighbor_num == <span class="number">2</span>:</span><br><span class="line">                    buf[i, j] = cells[i, j]</span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    buf[i, j] = <span class="number">0</span></span><br><span class="line">        self.cells = buf</span><br><span class="line">        self.timer += <span class="number">1</span></span><br><span class="line">   </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">plot_state</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="string">"""画出当前的状态"""</span></span><br><span class="line">        plt.title(<span class="string">'Iter :&#123;&#125;'</span>.format(self.timer))</span><br><span class="line">        plt.imshow(self.cells)</span><br><span class="line">        plt.show()</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">update_and_plot</span><span class="params">(self, n_iter)</span>:</span></span><br><span class="line">        <span class="string">"""更新状态并画图</span></span><br><span class="line"><span class="string">        Parameters</span></span><br><span class="line"><span class="string">        ----------</span></span><br><span class="line"><span class="string">        n_iter : 更新的轮数</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        plt.ion()</span><br><span class="line">        <span class="keyword">for</span> _ <span class="keyword">in</span> range(n_iter):</span><br><span class="line">            plt.title(<span class="string">'Iter :&#123;&#125;'</span>.format(self.timer))</span><br><span class="line">            plt.imshow(self.cells)</span><br><span class="line">            self.update_state()</span><br><span class="line">            plt.pause(<span class="number">0.2</span>)</span><br><span class="line">        plt.ioff()</span><br><span class="line">           </span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    game = GameOfLife(cells_shape=(<span class="number">60</span>, <span class="number">60</span>))</span><br><span class="line">    game.update_and_plot(<span class="number">5</span>)</span><br></pre></td></tr></table></figure>
<!-- <img src="数模：空间博弈与matplotlib绘制gif动图\01.png"> -->
<p><img src="/2019/11/12/数模：元胞自动机与空间演化博弈/201.png">  </p>
<p>生命游戏中的图形</p>
<ul>
<li>Category:Animated images - LifeWiki<br><a href="https://www.conwaylife.com/wiki/Category:Animated_images" target="_blank" rel="noopener">https://www.conwaylife.com/wiki/Category:Animated_images</a></li>
</ul>
<h2 id="基于元胞自动机的空间博弈"><a href="#基于元胞自动机的空间博弈" class="headerlink" title="基于元胞自动机的空间博弈"></a>基于元胞自动机的空间博弈</h2><p>问题重述</p>
<ul>
<li>个体位于L*L网络上，网络无周期边界。  </li>
<li>每个格子一个个体，有0或1两种状态，0为背叛，1为合作。  </li>
<li>每一时刻，个体和其Moore邻居进行博弈，依据Nowak的单参数收益矩阵，得到每个个体的收益，下一时刻个体的策略以此为基础，即选择自身及邻居中收益值最高的那个个体的策略，作为该个体下一时刻的策略。</li>
<li>个体策略更新是同步进行的。</li>
</ul>
<p>单参数收益矩阵( 1 &lt; b &lt; 2 )<br>|  | C | D |<br>| ——— | ——— | ——— |<br>| C | 1 | 0 |<br>| D | b | 0 |</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">基于元胞自动机的空间博弈演化</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">GameOfLife</span><span class="params">(object)</span>:</span></span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, cells_shape)</span>:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        Parameters</span></span><br><span class="line"><span class="string">        ----------</span></span><br><span class="line"><span class="string">        cells_shape : 一个元组，表示画布的大小。</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        Examples</span></span><br><span class="line"><span class="string">        --------</span></span><br><span class="line"><span class="string">        建立一个高20，宽30的画布</span></span><br><span class="line"><span class="string">        game = GameOfLife((20, 30))</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># 矩阵的四周不参与运算</span></span><br><span class="line">        self.cells_strategic = np.ones(cells_shape)</span><br><span class="line">        self.cells_benefits = np.zeros(cells_shape)</span><br><span class="line">        self.cells_statechange = np.zeros(cells_shape)</span><br><span class="line">        </span><br><span class="line">        self.state_change = &#123;(<span class="number">1</span>,<span class="number">1</span>):<span class="number">0</span>, (<span class="number">1</span>,<span class="number">0</span>):<span class="number">1</span>, (<span class="number">0</span>,<span class="number">0</span>):<span class="number">2</span>, (<span class="number">0</span>,<span class="number">1</span>):<span class="number">3</span>&#125; </span><br><span class="line"></span><br><span class="line">        real_width = cells_shape[<span class="number">0</span>] - <span class="number">2</span></span><br><span class="line">        real_height = cells_shape[<span class="number">1</span>] - <span class="number">2</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># self.cells_strategic[1:-1, 1:-1] = np.random.randint(2, size=(real_width, real_height)) # 随机策略</span></span><br><span class="line">        self.cells_strategic[int(real_width/<span class="number">2</span>)+<span class="number">1</span>, int(real_height/<span class="number">2</span>)+<span class="number">1</span>] = <span class="number">0</span>  <span class="comment"># 1：合作  0：背叛</span></span><br><span class="line">        </span><br><span class="line">        self.B = <span class="number">1.97</span> <span class="comment"># 背叛诱惑</span></span><br><span class="line">        self.timer = <span class="number">0</span></span><br><span class="line">   </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">update_state</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="string">"""更新一次状态"""</span></span><br><span class="line">        </span><br><span class="line">        buf_b = np.zeros(self.cells_strategic.shape)</span><br><span class="line">        buf_s = np.zeros(self.cells_strategic.shape)</span><br><span class="line">        buf_c = np.zeros(self.cells_strategic.shape)</span><br><span class="line"></span><br><span class="line">        cells = self.cells_strategic</span><br><span class="line">        <span class="comment"># 更新收益矩阵</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>, cells.shape[<span class="number">0</span>] - <span class="number">1</span>):</span><br><span class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> range(<span class="number">1</span>, cells.shape[<span class="number">0</span>] - <span class="number">1</span>):</span><br><span class="line">                <span class="comment"># 计算该细胞周围的合作者数量</span></span><br><span class="line">                neighbor = cells[i<span class="number">-1</span>:i+<span class="number">2</span>, j<span class="number">-1</span>:j+<span class="number">2</span>]</span><br><span class="line">                neighbor_num = np.sum(neighbor) <span class="comment"># 邻居中合作者的数量</span></span><br><span class="line">                <span class="comment"># 计算该细胞收益</span></span><br><span class="line">                <span class="keyword">if</span> cells[i, j] == <span class="number">1</span>: <span class="comment"># 计算合作者的收益</span></span><br><span class="line">                    buf_b[i, j] = neighbor_num * <span class="number">1.0</span></span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    buf_b[i, j] = neighbor_num * self.B</span><br><span class="line">        <span class="comment"># print(buf_b)</span></span><br><span class="line">        self.cells_benefits = buf_b</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># 更新状态矩阵和状态转移矩阵</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>, cells.shape[<span class="number">0</span>] - <span class="number">1</span>):</span><br><span class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> range(<span class="number">1</span>, cells.shape[<span class="number">0</span>] - <span class="number">1</span>):</span><br><span class="line">                <span class="comment"># 找到该细胞及其邻居收益最大值者的策略</span></span><br><span class="line">                neighbor = self.cells_benefits[i<span class="number">-1</span>:i+<span class="number">2</span>, j<span class="number">-1</span>:j+<span class="number">2</span>]</span><br><span class="line">                index = int(neighbor.argmax())</span><br><span class="line">                <span class="comment"># x, y= int(index / 3), index % 3</span></span><br><span class="line">                (x, y) = np.unravel_index(neighbor.argmax(), neighbor.shape)</span><br><span class="line">                buf_s[i, j] = cells[i<span class="number">-1</span>+x, j<span class="number">-1</span>+y]</span><br><span class="line">                <span class="comment"># 更新状态转移矩阵</span></span><br><span class="line">                last_stratage, new_stratage = cells[i, j], buf_s[i, j] </span><br><span class="line">                buf_c[i, j] = self.state_change[(last_stratage, new_stratage)]</span><br><span class="line">        <span class="comment"># print(buf_s)</span></span><br><span class="line">        self.cells_strategic = buf_s</span><br><span class="line">        self.cells_statechange = buf_c</span><br><span class="line">        self.timer += <span class="number">1</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">plot_state</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="string">"""画出当前的状态"""</span></span><br><span class="line">        plt.title(<span class="string">'Iter :&#123;&#125;'</span>.format(self.timer))</span><br><span class="line">        plt.imshow(self.cells_strategic)</span><br><span class="line">        plt.show()</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">update_and_plot</span><span class="params">(self, n_iter)</span>:</span></span><br><span class="line">        <span class="string">"""更新状态并画图</span></span><br><span class="line"><span class="string">        Parameters</span></span><br><span class="line"><span class="string">        ----------</span></span><br><span class="line"><span class="string">        n_iter : 更新的轮数</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        plt.ion()</span><br><span class="line">        <span class="keyword">for</span> _ <span class="keyword">in</span> range(n_iter):</span><br><span class="line">            plt.title(<span class="string">'Iter :&#123;&#125;'</span>.format(self.timer))</span><br><span class="line">            <span class="comment"># plt.imshow(self.cells_strategic)    # 策略</span></span><br><span class="line">            plt.imshow(self.cells_statechange)  <span class="comment"># 策略变化</span></span><br><span class="line">            self.update_state()</span><br><span class="line">            plt.pause(<span class="number">0.00001</span>)</span><br><span class="line">        plt.ioff()</span><br><span class="line">           </span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    game = GameOfLife(cells_shape=(<span class="number">101</span>, <span class="number">101</span>))</span><br><span class="line">    game.update_and_plot(n_iter=<span class="number">50</span>)</span><br></pre></td></tr></table></figure>
<h2 id="matplotlab绘制动图及保存gif图片"><a href="#matplotlab绘制动图及保存gif图片" class="headerlink" title="matplotlab绘制动图及保存gif图片"></a>matplotlab绘制动图及保存gif图片</h2><ul>
<li>如何通过 Matplotlib 绘制动画及保存 GIF 图片？ - frank 的专栏 - CSDN博客<br><a href="https://blog.csdn.net/briblue/article/details/84940997" target="_blank" rel="noopener">https://blog.csdn.net/briblue/article/details/84940997</a></li>
</ul>
<p>FuncAnimation 的构造方法<br><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, fig, func, frames=None, init_func=None, fargs=None,</span></span></span><br><span class="line"><span class="function"><span class="params">                 save_count=None, **kwargs)</span>:</span></span><br></pre></td></tr></table></figure></p>
<ul>
<li><strong>fig</strong> 自然是 matplotlib 中的 figure 对象。  </li>
<li><strong>func</strong> 是每一次更新时所调用的方法,它是回调函数。因此，我们可以在这个方法中更新 figure 当中的 axes 中的 line2d 对象，它是动态更新 figure 的根本。  </li>
<li><strong>frames</strong> 代表了整个动画过程中帧的取值范围，而本质上是一个数据发生器。</li>
<li><strong>init_func</strong> 是初始函数，用来初始 figure 的画面。  </li>
<li><strong>fargs</strong> 是每次附加给 func 回调函数的参数，可以为 None  </li>
<li><strong>save_count</strong> 是缓存的数量<br>除此之外，还有一些可选的参数，它们分别是  </li>
<li><strong>interval</strong> 是每 2 个 frame 发生的时间间隔,单位是 ms，默认值是 200.  </li>
<li><strong>repeat_delay</strong>  取值是数值，如果 animation 是重复播放的话，这个值就是每次播放之间的延迟时间，单位是 ms。  </li>
<li><strong>repeat</strong>  bool 型可选参数，默认为 True，代表动画是否会重复执行  </li>
<li><strong>blit</strong> bool 型可选参数，控制绘制的优化。默认是 False。  </li>
</ul>
<p>保存<br><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">anim.save(<span class="string">'cells_animation.gif'</span>,writer=<span class="string">'imagemagick'</span>)</span><br></pre></td></tr></table></figure></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> matplotlib.animation <span class="keyword">as</span> animation</span><br><span class="line"></span><br><span class="line">fig, ax = plt.subplots()</span><br><span class="line">xdata, ydata = [], []</span><br><span class="line">ln, = plt.plot([], [], <span class="string">'ro'</span>,animated=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">init</span><span class="params">()</span>:</span></span><br><span class="line">    ax.set_xlim(-np.pi,np.pi)</span><br><span class="line">    ax.set_ylim(<span class="number">-1</span>, <span class="number">1</span>)</span><br><span class="line">    <span class="keyword">return</span> ln,</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">update</span><span class="params">(frame)</span>:</span></span><br><span class="line">    xdata.append(frame)</span><br><span class="line">    ydata.append(np.sin(frame))</span><br><span class="line">    ln.set_data(xdata, ydata)</span><br><span class="line">    <span class="keyword">return</span> ln,</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">data_gen</span><span class="params">()</span>:</span></span><br><span class="line">    frame = -np.pi</span><br><span class="line">    step = <span class="number">2</span> * np.pi / <span class="number">90</span></span><br><span class="line">    <span class="keyword">while</span> frame &lt; np.pi:</span><br><span class="line">        frame += step</span><br><span class="line">        <span class="keyword">yield</span> frame</span><br><span class="line"></span><br><span class="line"><span class="comment"># anim = animation.FuncAnimation(fig, update, frames=np.linspace(-np.pi,np.pi, 360),interval=10,</span></span><br><span class="line"><span class="comment">#                     init_func=init,blit=True)</span></span><br><span class="line">anim = animation.FuncAnimation(fig, update, frames=data_gen,interval=<span class="number">10</span>,</span><br><span class="line">                    init_func=init,blit=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<!-- <img src="数模：空间博弈与matplotlib绘制gif动图\02.gif"> -->
<p><img src="/2019/11/12/数模：元胞自动机与空间演化博弈/202.gif">  </p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> matplotlib.animation <span class="keyword">as</span> animation</span><br><span class="line"></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">基于元胞自动机的空间博弈演化</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"></span><br><span class="line">game = GameOfLife(cells_shape=(<span class="number">101</span>, <span class="number">101</span>))</span><br><span class="line">data = game.cells_statechange        </span><br><span class="line">fig, ax = plt.subplots()</span><br><span class="line">ax = plt.imshow(data)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">init</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">return</span> ax,</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">update</span><span class="params">(data)</span>:</span></span><br><span class="line">    game.update_state()</span><br><span class="line">    data = game.cells_statechange</span><br><span class="line">    ax = plt.imshow(data)</span><br><span class="line">    <span class="keyword">return</span> ax,</span><br><span class="line"></span><br><span class="line">anim = animation.FuncAnimation(fig=fig, func=update, frames=<span class="number">10</span>, init_func=init, interval=<span class="number">1</span>, blit=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">plt.show()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 保存</span></span><br><span class="line">anim.save(<span class="string">'cells_animation.gif'</span>,writer=<span class="string">'imagemagick'</span>)</span><br></pre></td></tr></table></figure>
<!-- <img src="数模：空间博弈与matplotlib绘制gif动图\03.gif"> -->
<p><img src="/2019/11/12/数模：元胞自动机与空间演化博弈/303.png">  </p>
</the></the></the>]]></content>
      <tags>
        <tag>数模</tag>
      </tags>
  </entry>
  <entry>
    <title>那些年做的机器人</title>
    <url>/2021/02/12/Robot%EF%BC%9A%E9%82%A3%E4%BA%9B%E5%B9%B4%E5%81%9A%E7%9A%84%E6%9C%BA%E5%99%A8%E4%BA%BA/</url>
    <content><![CDATA[<p>Q: 如何才能有很多作品，参加很多比赛？</p>
<div align="center">
<img src="/2021/02/12/Robot：那些年做的机器人/作业检查机器人/002.png" width="700" height="450">
</div>

<a id="more"></a>
<the rest of contents | 余下全文>

<h1 id="小派舞蹈机器人"><a href="#小派舞蹈机器人" class="headerlink" title="小派舞蹈机器人"></a>小派舞蹈机器人</h1><p><img src="/2021/02/12/Robot：那些年做的机器人/小派双足机器人\photo01.jpg"></p>
<p>小pi舞蹈机器人，最初制作是参加2015年的iCAN大赛时，参考了BoB机器人的机械机构设计。</p>
<p>电路控制部分用的mega2560，挂载啦很多其他功能模块，诸如led、超声波、音乐播放等。</p>
<p>特别感谢当时的队友杜总小宇洋神，在806一起成长的日子十分难忘。</p>
<h3 id="模型"><a href="#模型" class="headerlink" title="模型"></a>模型</h3><p>littlePi by Binjun - Thingiverse <a href="https://www.thingiverse.com/thing:1811095" target="_blank" rel="noopener">https://www.thingiverse.com/thing:1811095</a></p>
<h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><p><a href="https://github.com/leebinjun/littlepi-robot" target="_blank" rel="noopener">https://github.com/leebinjun/littlepi-robot</a></p>
<h1 id="桌面冰球机器人"><a href="#桌面冰球机器人" class="headerlink" title="桌面冰球机器人"></a>桌面冰球机器人</h1><h2 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h2><ul>
<li>桌上冰球机器人 opencv3 + arduino mega2560  </li>
</ul>
<p><a href="https://blog.csdn.net/x_a_little_story/article/details/88747280" target="_blank" rel="noopener">https://blog.csdn.net/x_a_little_story/article/details/88747280</a></p>
<p>在闲鱼上面发现这个机器人感觉得很有趣，如果使用强化学习做人机对战是一个很好的项目。<br>查到了资料发现代码模型都很全，就按开源项目的设计和代码在端午小假期DIY了一个。<br>目前还是个人工智障，主要有以下问题待解决：</p>
<ul>
<li>笔记本性能不够，帧数最多只到9，反应速度不够快；</li>
<li>电机没有加Y轴，所以理论上只能防守；</li>
<li>机械结构上做了一些trick，比如倾斜“场地”和封死机器人的“球门”；</li>
<li>算法上还是常规几何推理的方法，并没有想好怎么使用RL，大概可以参考一下gym里的breakout？</li>
</ul>
<h2 id="Demo"><a href="#Demo" class="headerlink" title="Demo"></a>Demo</h2><div align="center">
<img src="/2021/02/12/Robot：那些年做的机器人/桌面冰球机器人\001.gif" width="600" height="350">
</div>

<h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><p>感谢故里草木深和JJulio两位前辈提供的资料。  </p>
<ul>
<li>桌上冰球机器人 opencv3 + arduino mega2560  </li>
</ul>
<p><a href="https://blog.csdn.net/x_a_little_story/article/details/88747280" target="_blank" rel="noopener">https://blog.csdn.net/x_a_little_story/article/details/88747280</a></p>
<ul>
<li>JJulio/AHRobot: Air Hockey Robot Project  </li>
</ul>
<p><a href="https://github.com/JJulio/AHRobot" target="_blank" rel="noopener">https://github.com/JJulio/AHRobot</a></p>
<h1 id="loomo多服务机器人"><a href="#loomo多服务机器人" class="headerlink" title="loomo多服务机器人"></a>loomo多服务机器人</h1><h2 id="设计思路"><a href="#设计思路" class="headerlink" title="设计思路"></a>设计思路</h2><p><img src="/2021/02/12/Robot：那些年做的机器人/loomo多服务机器人开发\设计思路-201905.png" width="600" height="300"></p>
<h2 id="一些资料"><a href="#一些资料" class="headerlink" title="一些资料"></a>一些资料</h2><ul>
<li>机器人 · 3D打印的假肢，像真手一样听你指挥！<br><a href="https://mp.weixin.qq.com/s/qumdZIXXGmF-blSeHLu1tw" target="_blank" rel="noopener">https://mp.weixin.qq.com/s/qumdZIXXGmF-blSeHLu1tw</a></li>
</ul>
<h1 id="100以内加减法（小学二年级）算数机器人"><a href="#100以内加减法（小学二年级）算数机器人" class="headerlink" title="100以内加减法（小学二年级）算数机器人"></a>100以内加减法（小学二年级）算数机器人</h1><h2 id="当前的功能"><a href="#当前的功能" class="headerlink" title="当前的功能"></a>当前的功能</h2><p>拍一张答题纸，画四个点，透射变换为标准尺寸后进行算式分割，对每张算式图片检测识别数字后进行计算，并打印结果;<br>手指指到相应算式下方，语音播报该计算结果。</p>
<h2 id="待解决的问题"><a href="#待解决的问题" class="headerlink" title="待解决的问题"></a>待解决的问题</h2><ul>
<li>阴影下识别出错</li>
</ul>
<h2 id="接下来的工作"><a href="#接下来的工作" class="headerlink" title="接下来的工作"></a>接下来的工作</h2><ul>
<li>写字机器人接入?</li>
<li>更复杂的算式？</li>
</ul>
<h2 id="Demo-1"><a href="#Demo-1" class="headerlink" title="Demo"></a>Demo</h2><div align="center">
<iframe height="498" width="510" src="http://player.youku.com/embed/XNDIyNzA4NDM0MA==">
</iframe>
</div>

<ul>
<li>算数-其他-高清完整正版视频在线观看-优酷  </li>
</ul>
<p><a href="https://v.youku.com/v_show/id_XNDIyNzA4NDM0MA==.html" target="_blank" rel="noopener">https://v.youku.com/v_show/id_XNDIyNzA4NDM0MA==.html</a></p>
<h2 id="愉快地一天"><a href="#愉快地一天" class="headerlink" title="愉快地一天"></a>愉快地一天</h2><p>Q: 如何才能有很多作品，参加很多比赛？</p>
<div align="center">
<img src="/2021/02/12/Robot：那些年做的机器人/作业检查机器人/002.png" width="700" height="450">
</div>


<h1 id="简单手势分类器"><a href="#简单手势分类器" class="headerlink" title="简单手势分类器"></a>简单手势分类器</h1><p>树莓派+摄像头作为一个视觉传感器，串口实时返回手势分类结果。</p>
<h2 id="准备"><a href="#准备" class="headerlink" title="准备"></a>准备</h2><h3 id="安装tensorflow"><a href="#安装tensorflow" class="headerlink" title="安装tensorflow"></a>安装tensorflow</h3><p>维护树莓派交叉编译版本的github项目</p>
<ul>
<li>samjabrahams/tensorflow-on-raspberry-pi: TensorFlow for Raspberry Pi<br><a href="https://github.com/samjabrahams/tensorflow-on-raspberry-pi" target="_blank" rel="noopener">https://github.com/samjabrahams/tensorflow-on-raspberry-pi</a><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo apt install libatlas-base-dev</span><br><span class="line">pip3 install tensorflow</span><br><span class="line">``` </span><br><span class="line">安装旧版本</span><br><span class="line">``` bash </span><br><span class="line">$ wget https://github.com/samjabrahams/tensorflow-on-raspberry-pi/releases/download/v0.11.0/tensorflow-0.11.0-py3-none-any.whl</span><br><span class="line">$ sudo pip3 install tensorflow-0.11.0-py3-none-any.whl</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="安装serial"><a href="#安装serial" class="headerlink" title="安装serial"></a>安装serial</h3><p>安装串口模块<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ sudo apt-get install python-serial</span><br><span class="line">$ pip install serial</span><br><span class="line">$ pip install pyserial</span><br></pre></td></tr></table></figure></p>
<p>如果需要指定位置<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ sudo pip install --target=/usr/<span class="built_in">local</span>/lib/python3.5/dist-packages pyserial</span><br></pre></td></tr></table></figure></p>
<h3 id="一些包"><a href="#一些包" class="headerlink" title="一些包"></a>一些包</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">pip install pillow</span><br><span class="line">pip install matplotlib</span><br></pre></td></tr></table></figure>
<h2 id="数据处理"><a href="#数据处理" class="headerlink" title="数据处理"></a>数据处理</h2><p>使用OpenCV的BackgroundSubtractor类，分割前景和背景，获得手势灰度图<br><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">camera = cv2.VideoCapture(<span class="number">0</span>) <span class="comment"># 参数0表示第一个摄像头</span></span><br><span class="line">bs = cv2.createBackgroundSubtractorKNN(detectShadows=<span class="literal">True</span>)</span><br><span class="line">es = cv2.getStructuringElement(cv2.MORPH_ELLIPSE, (<span class="number">3</span>, <span class="number">3</span>))</span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    grabbed, frame_lwpCV = camera.read()</span><br><span class="line">    fgmask = bs.apply(frame_lwpCV) <span class="comment"># 背景分割器，该函数计算了前景掩码</span></span><br><span class="line">    <span class="comment"># 二值化阈值处理，前景掩码含有前景的白色值以及阴影的灰色值，在阈值化图像中，将非纯白色（244~255）的所有像素都设为0，而不是255</span></span><br><span class="line">    th = cv2.threshold(fgmask.copy(), <span class="number">244</span>, <span class="number">255</span>, cv2.THRESH_BINARY)[<span class="number">1</span>]</span><br><span class="line">    <span class="comment"># 下面就跟基本运动检测中方法相同，识别目标，检测轮廓，在原始帧上绘制检测结果</span></span><br><span class="line">    dilated = cv2.dilate(th, es, iterations=<span class="number">2</span>) <span class="comment"># 形态学膨胀</span></span><br><span class="line">    image, contours, hierarchy = cv2.findContours(dilated, cv2.RETR_EXTERNAL, cv2.CHAIN_APPROX_SIMPLE) <span class="comment"># 该函数计算一幅图像中目标的轮廓</span></span><br><span class="line">    <span class="comment"># rasp</span></span><br><span class="line">    <span class="comment"># contours, hierarchy = cv2.findContours(dilated, cv2.RETR_EXTERNAL, cv2.CHAIN_APPROX_SIMPLE) # 该函数计算一幅图像中目标的轮廓</span></span><br><span class="line">    <span class="keyword">for</span> c <span class="keyword">in</span> contours:</span><br><span class="line">        <span class="keyword">if</span> cv2.contourArea(c) &gt; <span class="number">2000</span>: <span class="comment">#1600:</span></span><br><span class="line">            (x, y, w, h) = cv2.boundingRect(c)</span><br><span class="line">            cv2.rectangle(frame_lwpCV, (x, y), (x + w, y + h), (<span class="number">255</span>, <span class="number">255</span>, <span class="number">0</span>), <span class="number">2</span>)</span><br><span class="line">    cv2.imshow(<span class="string">'detection'</span>, frame_lwpCV)</span><br><span class="line">    <span class="comment"># 按'q'健退出循环</span></span><br><span class="line"><span class="comment"># When everything done, release the capture</span></span><br></pre></td></tr></table></figure></p>
<h2 id="模型和训练"><a href="#模型和训练" class="headerlink" title="模型和训练"></a>模型和训练</h2><p>通过一个小的卷积网络来实现分类，两层卷积+两层全连接<br><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">model</span><span class="params">(x, keep_prob)</span>:</span></span><br><span class="line">    <span class="string">'''Build the classify model</span></span><br><span class="line"><span class="string">    Args:</span></span><br><span class="line"><span class="string">      x: Input, tf.placeholder, the dimension is [-1, 784]</span></span><br><span class="line"><span class="string">      keep_prob: </span></span><br><span class="line"><span class="string">    Returns:</span></span><br><span class="line"><span class="string">      y: Classification probability</span></span><br><span class="line"><span class="string">    '''</span></span><br><span class="line">    x_image = tf.reshape(x, [<span class="number">-1</span>, w, h, <span class="number">1</span>])</span><br><span class="line">    <span class="comment"># Conv1</span></span><br><span class="line">    <span class="keyword">with</span> tf.name_scope(<span class="string">'conv1'</span>):</span><br><span class="line">        W_conv1 = weight_variable([<span class="number">3</span>, <span class="number">3</span>, <span class="number">1</span>, <span class="number">16</span>], name=<span class="string">"weight"</span>)</span><br><span class="line">        b_conv1 = bias_variable([<span class="number">16</span>], name=<span class="string">'bias'</span>)</span><br><span class="line">        h_conv1 = tf.nn.relu(tf.nn.conv2d(x_image, W_conv1, strides=[<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>], padding=<span class="string">"SAME"</span>, name=<span class="string">'conv'</span>)+ b_conv1)</span><br><span class="line">        h_pool1 = tf.nn.max_pool(h_conv1, ksize=[<span class="number">1</span>,<span class="number">2</span>,<span class="number">2</span>,<span class="number">1</span>], strides=[<span class="number">1</span>,<span class="number">2</span>,<span class="number">2</span>,<span class="number">1</span>], padding=<span class="string">"SAME"</span>, name=<span class="string">"pool"</span>)</span><br><span class="line">    <span class="comment"># Conv2</span></span><br><span class="line">    <span class="keyword">with</span> tf.name_scope(<span class="string">'conv2'</span>):</span><br><span class="line">        W_conv2 = weight_variable([<span class="number">3</span>, <span class="number">3</span>, <span class="number">16</span>, <span class="number">32</span>], name=<span class="string">"weight"</span>)</span><br><span class="line">        b_conv2 = bias_variable([<span class="number">32</span>], name=<span class="string">'bias'</span>)</span><br><span class="line">        h_conv2 = tf.nn.relu(tf.nn.conv2d(h_pool1, W_conv2, strides=[<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>], padding=<span class="string">"SAME"</span>, name=<span class="string">'conv'</span>)+ b_conv2)</span><br><span class="line">        h_pool2 = tf.nn.max_pool(h_conv2, ksize=[<span class="number">1</span>,<span class="number">2</span>,<span class="number">2</span>,<span class="number">1</span>], strides=[<span class="number">1</span>,<span class="number">2</span>,<span class="number">2</span>,<span class="number">1</span>], padding=<span class="string">"SAME"</span>, name=<span class="string">"pool"</span>)</span><br><span class="line">    <span class="comment"># fc1</span></span><br><span class="line">    <span class="keyword">with</span> tf.name_scope(<span class="string">'fc1'</span>):</span><br><span class="line">        W_fc1 = weight_variable([<span class="number">7</span>*<span class="number">7</span>*<span class="number">32</span>, <span class="number">256</span>], name=<span class="string">"weight"</span>)</span><br><span class="line">        b_fc1 = bias_variable([<span class="number">256</span>], name=<span class="string">'bias'</span>)</span><br><span class="line">        h_pool2_flat = tf.reshape(h_pool2, [<span class="number">-1</span>, <span class="number">7</span>*<span class="number">7</span>*<span class="number">32</span>])</span><br><span class="line">        h_fc1 = tf.nn.relu(tf.matmul(h_pool2_flat, W_fc1)+b_fc1)</span><br><span class="line">    <span class="comment"># Dropout</span></span><br><span class="line">    h_fc1_drop = tf.nn.dropout(h_fc1, keep_prob)</span><br><span class="line">    <span class="comment"># fc2</span></span><br><span class="line">    <span class="keyword">with</span> tf.name_scope(<span class="string">'fc2'</span>):</span><br><span class="line">        W_fc2 = weight_variable([<span class="number">256</span>, <span class="number">4</span>], name=<span class="string">"weight"</span>)</span><br><span class="line">        b_fc2 = bias_variable([<span class="number">4</span>], name=<span class="string">'bias'</span>)</span><br><span class="line">        y = tf.nn.softmax(tf.matmul(h_fc1_drop, W_fc2)+b_fc2, name=<span class="string">"output"</span>)</span><br><span class="line">    <span class="keyword">return</span> y</span><br></pre></td></tr></table></figure></p>
<h2 id="HC-05蓝牙串口"><a href="#HC-05蓝牙串口" class="headerlink" title="HC-05蓝牙串口"></a>HC-05蓝牙串口</h2><h3 id="蓝牙配对"><a href="#蓝牙配对" class="headerlink" title="蓝牙配对"></a>蓝牙配对</h3><p>连接(rt反接)</p>
<ul>
<li>usb-ttl ————— bluetooth</li>
<li>RXD &nbsp;&nbsp;&nbsp;&nbsp;————— TXD</li>
<li>TXD &nbsp;&nbsp;&nbsp;&nbsp;————— RXD</li>
</ul>
<p>按住复位键插USB，进入AT模式<br>打开串口助手，设置波特率38400，数据位8位，停止位1位，无校验位，加回车换行(发送消息包含换行符)<br>修改名称<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">→ AT+ NAME=xxx</span><br><span class="line">→ AT+ NAME?</span><br></pre></td></tr></table></figure></p>
<p>设置蓝牙密码，注意两块蓝牙的密码都要一样<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">→ AT+ PSWD=1234</span><br><span class="line">→ AT+ PSWD?</span><br></pre></td></tr></table></figure></p>
<p>设置主从模式<br>串口调试助手A，将蓝牙A配置为主机模式<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">→ AT+ ROLE=1</span><br><span class="line">→ AT+ ROLE?</span><br></pre></td></tr></table></figure></p>
<p>串口调试助手B，将蓝牙B配置为从机模式<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">→ AT+ ROLE=0</span><br></pre></td></tr></table></figure></p>
<p>设置波特率9600，无校验位，1停止位<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">→ AT+ UART:9600,0,0</span><br><span class="line">→ AT+ UART?</span><br></pre></td></tr></table></figure></p>
<p>设置连接模式<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">→ AT+ CMODE=0</span><br><span class="line">→ AT+ CMODE?</span><br></pre></td></tr></table></figure></p>
<p>查询蓝牙地址，并相互绑定，注意把地址的冒号换成逗号<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">→ AT+ ADDR?</span><br><span class="line">→ AT+ BIND=98d3,32,307440</span><br></pre></td></tr></table></figure></p>
<h2 id="结果"><a href="#结果" class="headerlink" title="结果"></a>结果</h2><p>查看端口<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ ls /dev/tty*</span><br></pre></td></tr></table></figure></p>
<p>运行<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ python run.py --serial /dev/ttyUSB0</span><br></pre></td></tr></table></figure></p>
<p><img src="/2021/02/12/Robot：那些年做的机器人/简单手势分类器\02.png" width="600" height="300"><br><img src="/2021/02/12/Robot：那些年做的机器人/简单手势分类器\01.png" width="600" height="300"></p>
<h2 id="参考博客"><a href="#参考博客" class="headerlink" title="参考博客"></a>参考博客</h2><ul>
<li>【Python+OpenCV】目标跟踪-背景分割器：KNN、MOG2和GMG - CSDN博客<br><a href="https://blog.csdn.net/lwplwf/article/details/73551648" target="_blank" rel="noopener">https://blog.csdn.net/lwplwf/article/details/73551648</a></li>
<li>Tensorflow+树莓派，自制“猜拳神器” - Lauyeed的博客 - CSDN博客<br><a href="https://blog.csdn.net/Lauyeed/article/details/79345685" target="_blank" rel="noopener">https://blog.csdn.net/Lauyeed/article/details/79345685</a></li>
<li>蓝牙模块HC-05使用说明_图文_百度文库<br><a href="http://wenku.baidu.com/link?url=tDhQ1eN2RBFS4-iA9dFZuuYUUb21nx3ZpahLARbDaesVM0HkHMeiLc0NzfR7W6NVqc5F57p0x8t6c_3T3JN4ne9NCEB540mwEYV5kLpFSfq" target="_blank" rel="noopener">http://wenku.baidu.com/link?url=tDhQ1eN2RBFS4-iA9dFZuuYUUb21nx3ZpahLARbDaesVM0HkHMeiLc0NzfR7W6NVqc5F57p0x8t6c_3T3JN4ne9NCEB540mwEYV5kLpFSfq</a></li>
<li>AttributeError: module ‘serial’ has no attribute ‘Serial’ - m0_37827405的博客 - CSDN博客<br><a href="https://blog.csdn.net/m0_37827405/article/details/80879678" target="_blank" rel="noopener">https://blog.csdn.net/m0_37827405/article/details/80879678</a></li>
</ul>
<h1 id="果实采摘机器人"><a href="#果实采摘机器人" class="headerlink" title="果实采摘机器人"></a>果实采摘机器人</h1><h1 id="解魔方机器人"><a href="#解魔方机器人" class="headerlink" title="解魔方机器人"></a>解魔方机器人</h1></the>]]></content>
      <tags>
        <tag>raspberry</tag>
        <tag>stm32</tag>
        <tag>Arduino</tag>
        <tag>robot</tag>
        <tag>loomo</tag>
        <tag>openCV</tag>
        <tag>机械手</tag>
        <tag>tf</tag>
        <tag>python</tag>
      </tags>
  </entry>
  <entry>
    <title>FDM3D打印电吉他琴体，制作电吉他</title>
    <url>/2022/06/24/%E6%97%A5%E5%B8%B8%EF%BC%9AFDM3D%E6%89%93%E5%8D%B0%E7%94%B5%E5%90%89%E4%BB%96%E7%90%B4%E4%BD%93%EF%BC%8C%E5%88%B6%E4%BD%9C%E7%94%B5%E5%90%89%E4%BB%96/</url>
    <content><![CDATA[<!-- ** FDM3D打印电吉他琴体，制作电吉他 ** <Excerpt in index | 首页摘要> -->
<p>记录一把电吉他的制作：琴体部分完全采用FDM3D打印制作<br>多图预警</p>
<h2 id="展示"><a href="#展示" class="headerlink" title="展示"></a>展示</h2><p><img alt="00" src="/2022/06/24/日常：FDM3D打印电吉他琴体，制作电吉他/00.jpg" width="400">  </p>
<a id="more"></a>
<the rest of contents | 余下全文>

<h2 id="模型"><a href="#模型" class="headerlink" title="模型"></a>模型</h2><ul>
<li>Stratocaster/Les Paul Hybrid Guitar by TheWhaleBiologist - Thingiverse<br><a href="https://www.thingiverse.com/thing:352349" target="_blank" rel="noopener">https://www.thingiverse.com/thing:352349</a></li>
</ul>
<p>TheWhaleBiologist大神的模型是一个琴体整体，并提供了可使用Inventor修改的.ipt原始文件。<br>我在琴体模型上添加了自己的logo，并将整个模型切分成22个小块，便于使用不同颜色进行打印。</p>
<ul>
<li>Guitar by Binjun - Thingiverse<br><a href="https://www.thingiverse.com/thing:3709391" target="_blank" rel="noopener">https://www.thingiverse.com/thing:3709391</a></li>
</ul>
<p><img alt="01" src="/2022/06/24/日常：FDM3D打印电吉他琴体，制作电吉他/01.jpg" width="400">  </p>
<h2 id="准备"><a href="#准备" class="headerlink" title="准备"></a>准备</h2><p><img alt="02" src="/2022/06/24/日常：FDM3D打印电吉他琴体，制作电吉他/02.jpg" width="400">  </p>
<p>除了琴体外，还需要购买电吉他的其他配件。在某宝上可以购买到整套电吉他的DIY组装材料，主要包括：  </p>
<ul>
<li>琴颈</li>
<li>弦准</li>
<li>压弦扣</li>
<li>琴弦</li>
<li>连接加强板</li>
<li>下驹后盖板</li>
<li>尾钉</li>
<li>护板</li>
<li>琴码</li>
<li>拾音器等电子配件</li>
</ul>
<p><img alt="03" src="/2022/06/24/日常：FDM3D打印电吉他琴体，制作电吉他/03.jpg" width="400">  </p>
<p>工具准备</p>
<ul>
<li>手钻</li>
<li>胶水(502、AB胶、亚克力胶水)</li>
<li>打磨工具（锉刀、剪刀、美工刀）</li>
<li>螺丝刀</li>
</ul>
<h2 id="组装"><a href="#组装" class="headerlink" title="组装"></a>组装</h2><p>1.用胶水和剪刀将3D打印出来的塑料小块进行粘贴拼接，完成琴体的制作。</p>
<p><img alt="04" src="/2022/06/24/日常：FDM3D打印电吉他琴体，制作电吉他/04.jpg" width="400">  </p>
<p>2.在上弦枕底部涂抹胶水粘在指板的开槽处。<br>3.组装弦准，在琴头上打孔安装旋钮和压弦扣。</p>
<p><img alt="05" src="/2022/06/24/日常：FDM3D打印电吉他琴体，制作电吉他/05.jpg" width="400">  </p>
<p>4.连接琴柄和3D打印琴体，调整好琴柄和琴体开槽处的尺寸和高度，根据加强板螺丝孔的位置开孔，用螺丝将琴柄、琴身和加强板连在一起。</p>
<p><img alt="06" src="/2022/06/24/日常：FDM3D打印电吉他琴体，制作电吉他/06.jpg" width="400">  </p>
<p>5.将电路部分连接好，预留接地线和音频输出线，安装护板。</p>
<p><img alt="07" src="/2022/06/24/日常：FDM3D打印电吉他琴体，制作电吉他/07.jpg" width="400"></p>
<p>6.安装琴码。  </p>
<p><img alt="08" src="/2022/06/24/日常：FDM3D打印电吉他琴体，制作电吉他/08.jpg" width="400"> </p>
<p>7.焊接插座线，安装插座片。  </p>
<p><img alt="09" src="/2022/06/24/日常：FDM3D打印电吉他琴体，制作电吉他/09.jpg" width="400">  </p>
<p><img alt="10" src="/2022/06/24/日常：FDM3D打印电吉他琴体，制作电吉他/10.jpg" width="400">  </p>
<p>8.安装下驹在琴体背面的部件，焊接好接地线并固定好弹簧。</p>
<p><img alt="11" src="/2022/06/24/日常：FDM3D打印电吉他琴体，制作电吉他/11.jpg" width="400">  </p>
<p><img alt="12" src="/2022/06/24/日常：FDM3D打印电吉他琴体，制作电吉他/12.jpg" width="400">  </p>
<p>9.安装琴弦并调音，摇把只是摆设可以不装。</p>
<p><img alt="13" src="/2022/06/24/日常：FDM3D打印电吉他琴体，制作电吉他/13.jpg" width="400">  </p>
<p>10.买个琴箱，完成。</p>
<p><img alt="14" src="/2022/06/24/日常：FDM3D打印电吉他琴体，制作电吉他/14.jpg" width="400">  </p>
<h2 id="一些乐理知识"><a href="#一些乐理知识" class="headerlink" title="一些乐理知识"></a>一些乐理知识</h2><h3 id="有效弦长-Scale-Length"><a href="#有效弦长-Scale-Length" class="headerlink" title="有效弦长 Scale Length"></a>有效弦长 Scale Length</h3><p>有效弦长是弦枕与第12品之间长度的二倍，这段长度也正好是一个八度的音程，琴桥的位置也由此确定，即琴桥必须调整到一个正确的位置，让这把琴得到一个正确的有效弦长。</p>
<h3 id="电吉他LP型和ST型"><a href="#电吉他LP型和ST型" class="headerlink" title="电吉他LP型和ST型"></a>电吉他LP型和ST型</h3><p>所以为什么用LP的琴体配上ST的琴颈呢？因为当时还不知道这些。</p>
<h2 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h2><ul>
<li>3D打印电吉他 撩妹技能Get起来！|3D学堂|3D虎<br><a href="http://www.3dhoo.com/news/xuetang/39430.html" target="_blank" rel="noopener">http://www.3dhoo.com/news/xuetang/39430.html</a></li>
</ul>
</the>]]></content>
      <tags>
        <tag>3D打印</tag>
        <tag>吉他</tag>
        <tag>随笔</tag>
      </tags>
  </entry>
  <entry>
    <title>眼动追踪推荐眼镜</title>
    <url>/2019/09/19/%E7%9C%BC%E5%8A%A8%E8%BF%BD%E8%B8%AA%E6%8E%A8%E8%8D%90%E7%9C%BC%E9%95%9C/</url>
    <content><![CDATA[<div align="center">
<img src="/2019/09/19/眼动追踪推荐眼镜/000.png">
</div>

<a id="more"></a>
<the rest of contents | 余下全文>

<h1 id="SUMMARY"><a href="#SUMMARY" class="headerlink" title="SUMMARY"></a>SUMMARY</h1><h2 id="WHY"><a href="#WHY" class="headerlink" title="WHY"></a>WHY</h2><p>眼睛是人类面部最为显著的特征之一，眼睛及其运动在用户的认知、兴趣、情绪表达等过程中有着至关重要的作用。  </p>
<p>眼动追踪技术通过追踪人体眼球运动，来识别用户所处的环境，预测用户的需求及状态，并进行响应，以实现用眼睛控制设备、完成一些操作。</p>
<p>AR眼镜自诞生起就为人类更加直观地理解眼前的世界提供了诸多便利。结合眼动追踪技术，AR眼镜可以更加了解用户的兴趣点和需求，提供更精准的信息推荐，为用户带来更加自然的交互体验。</p>
<h2 id="WHAT"><a href="#WHAT" class="headerlink" title="WHAT"></a>WHAT</h2><p>本文涉及一种人眼注视点的实时估计眼镜，该系统通过提取人眼信息，建立人眼与兴趣点映射关系，实现用户关注信息的实时推荐功能。</p>
<p>本文主要从以下三个方面进行研究：</p>
<ul>
<li>首先是人眼关键点的检测问题，通过多级级联的回归树进行眼眶和通孔的检测，得到关键点特征信息；  </li>
<li>其次是兴趣点的估计问题，通过梯度提升回归算法建立人眼关键点和兴趣点的映射关系；  </li>
<li>最后是兴趣点处的目标识别问题，通过yolo目标检测网络对检测视野中的待推荐目标，判断兴趣点是否落在识别框中。</li>
</ul>
<h2 id="HOW"><a href="#HOW" class="headerlink" title="HOW"></a>HOW</h2><p>step1. 眼镜上部署两个ip摄像头，camera1获取用户视野图像，camera2获取用户眼睛图像，图像实时回传至中央处理器cpu；<br>step2.1 眼动信息处理，提取camera2中用户眼眶和眼球的关键点信息；<br>step2.2 兴趣点估计，由step2中的关键点特征估算camera1中人眼注视点；<br>step3. 用户视野图像目标检测，实时检测camera1中的待推荐目标，记录相应位置信息；<br>step4. 识别与信息推荐，判断step2中计算的兴趣点是否落在step3中计算的识别框中，进行语音信息推荐。</p>
<div align="center">
<img src="/2019/09/19/眼动追踪推荐眼镜/detect.gif" width="500" height="150">
</div>


<h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><ul>
<li>一文读懂眼动追踪技术及应用<br><a href="https://mp.weixin.qq.com/s?src=11&amp;timestamp=1569225062&amp;ver=1869&amp;signature=ML2J84rjyrwpwNWYIXxrqaJIq7YZdGRAfzd8*q-v2vtSxIpREhSF0MpcjruTuYEFfgRR15F9IfmkCg1iQ1HY4hZtzFGT3gOF8LGyVoxKTtr89LIuel9h6XbniBG2y-w0&amp;new=1" target="_blank" rel="noopener">https://mp.weixin.qq.com/s?src=11&amp;timestamp=1569225062&amp;ver=1869&amp;signature=ML2J84rjyrwpwNWYIXxrqaJIq7YZdGRAfzd8*q-v2vtSxIpREhSF0MpcjruTuYEFfgRR15F9IfmkCg1iQ1HY4hZtzFGT3gOF8LGyVoxKTtr89LIuel9h6XbniBG2y-w0&amp;new=1</a>   </li>
</ul>
<h1 id="眼动追踪推荐眼镜一：硬件篇"><a href="#眼动追踪推荐眼镜一：硬件篇" class="headerlink" title="眼动追踪推荐眼镜一：硬件篇"></a>眼动追踪推荐眼镜一：硬件篇</h1><p>硬件组成部分主要就是眼镜架、摄像头和供电系统。</p>
<p>可以参考的开源方案有</p>
<ul>
<li>Pupil Labs<br><a href="https://pupil-labs.com/" target="_blank" rel="noopener">https://pupil-labs.com/</a></li>
</ul>
<p>当前设计使用的是USB摄像头直接连接电脑的方案：240°鱼眼摄像头被固定在眼镜框正前方负责采集用户视野图像，720P摄像头则固定在右前方伸出的支架上负责采集右眼图像，摄像头通过USB与计算机连接完成图像传输。</p>
<p>以下是对ip摄像头的测试，计划下一步用于眼镜的改进。</p>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
<meta charset="utf-8"> 
<title>title_test</title> 
<script src="https://cdn.staticfile.org/jquery/1.10.2/jquery.min.js">
</script>
<script>
$(document).ready(function(){
    $(document).on('click', '.fold_hider', function(){
        $('>.fold', this.parentNode).slideToggle();
        $('>:first', this).toggleClass('open');
    });
    $("div.fold").css("display","none");
});
</script>
</head>
</html>

<h2 id="ip摄像头"><a href="#ip摄像头" class="headerlink" title="ip摄像头"></a>ip摄像头</h2><p>45元的WIFI摄像头模块，能玩出什么花样？ - 知乎<br><a href="https://zhuanlan.zhihu.com/p/60565132" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/60565132</a></p>
<p>ip摄像头选用ESP32-CAM模块，包括ESP32wifi模块和一个OV2640的200W像素摄像头。</p>
<h3 id="烧录固件"><a href="#烧录固件" class="headerlink" title="烧录固件"></a>烧录固件</h3><p>硬件连接，注意需要将GPIO0和边上的GND短接进入烧录模式</p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">USB-TTL</th>
<th style="text-align:center">ESP32-CAM</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">3.3V</td>
<td style="text-align:center">VCC</td>
</tr>
<tr>
<td style="text-align:center">GND</td>
<td style="text-align:center">GND</td>
</tr>
<tr>
<td style="text-align:center">RX</td>
<td style="text-align:center">U0T</td>
</tr>
<tr>
<td style="text-align:center">TX</td>
<td style="text-align:center">U0R</td>
</tr>
<tr>
<td style="text-align:center"></td>
<td style="text-align:center">IO0和GND短接</td>
</tr>
</tbody>
</table>
</div>
<p><img src="/2019/09/19/眼动追踪推荐眼镜/01.jpg"></p>
<p>烧录工具我们用的是Arduino IDE，首先需要添加ESP32的芯片支持<br>打开首选项，在附加开发板管理器网址里填上：<a href="https://dl.espressif.com/dl/package_esp32_index.json" target="_blank" rel="noopener">https://dl.espressif.com/dl/package_esp32_index.json</a> ，然后单击 好 。<br><img src="/2019/09/19/眼动追踪推荐眼镜/04.png"></p>
<p>然后在工具里打开开发板管理器，等待索引做完之后找到ESP32并安装。<br><img src="/2019/09/19/眼动追踪推荐眼镜/00.png"></p>
<p>在github下载示例代码。  </p>
<ul>
<li>RuiSantosdotme/arduino-esp32-CameraWebServer: CameraWebServer for ESP32-CAM in Arduino IDE<br><a href="https://github.com/RuiSantosdotme/arduino-esp32-CameraWebServer" target="_blank" rel="noopener">https://github.com/RuiSantosdotme/arduino-esp32-CameraWebServer</a></li>
</ul>
<p>打开CameraWebServer.ino文件，进行一些设置<br><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Select camera model</span></span><br><span class="line"><span class="comment">//#define CAMERA_MODEL_WROVER_KIT</span></span><br><span class="line"><span class="comment">//#define CAMERA_MODEL_M5STACK_PSRAM</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> CAMERA_MODEL_AI_THINKER</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">char</span>* ssid = <span class="string">"REPLACE_WITH_YOUR_SSID"</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">char</span>* password = <span class="string">"REPLACE_WITH_YOUR_PASSWORD"</span>;</span><br></pre></td></tr></table></figure></p>
<p>在开发板里面选对我们需要的开发板和相关设置，然后点击上传就好。</p>
<p><img src="/2019/09/19/眼动追踪推荐眼镜/02.png"></p>
<h3 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h3><p>通过浏览器输入ESP32-CAM的IP地址，就能看到设置页面了。</p>
<p>点击Start Stream就能看到实时影像了。</p>
<p>通过python脚本读取图像。</p>
<body>
<div>
    <div class="fold_hider">
        <div class="close hider_title">点击显示/隐藏代码</div>
    </div>
    <div class="fold">

<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"><span class="keyword">import</span> urllib.request</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">host = <span class="string">"192.168.0.100:81"</span> <span class="comment"># 在这里记得修改ip，否则是无法调用的，刚刚浏览器输入的地址</span></span><br><span class="line">hoststr = <span class="string">'http://'</span> + host + <span class="string">'/stream'</span></span><br><span class="line">print(<span class="string">'Streaming '</span> + hoststr)</span><br><span class="line">print(<span class="string">'Print Esc to quit'</span>)</span><br><span class="line">stream=urllib.request.urlopen(hoststr)</span><br><span class="line">bytes=bytes()</span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    bytes+=stream.read(<span class="number">1024</span>)</span><br><span class="line">    a = bytes.find(<span class="string">b'\xff\xd8'</span>)</span><br><span class="line">    b = bytes.find(<span class="string">b'\xff\xd9'</span>)</span><br><span class="line">    i = <span class="number">0</span></span><br><span class="line">    <span class="keyword">if</span> a!=<span class="number">-1</span> <span class="keyword">and</span> b!=<span class="number">-1</span>:</span><br><span class="line">        jpg = bytes[a:b+<span class="number">2</span>]</span><br><span class="line">        bytes= bytes[b+<span class="number">2</span>:]</span><br><span class="line">        <span class="comment">#flags = 1 for color image</span></span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            i = cv2.imdecode(np.fromstring(jpg, dtype=np.uint8),flags=<span class="number">1</span>)</span><br><span class="line">            <span class="comment"># print i.shape</span></span><br><span class="line">            cv2.imshow(<span class="string">"wjw"</span>,i)</span><br><span class="line">            <span class="keyword">if</span> cv2.waitKey(<span class="number">1</span>) &amp; <span class="number">0xFF</span> == ord(<span class="string">'q'</span>):</span><br><span class="line">                exit(<span class="number">0</span>)</span><br><span class="line">        <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">            print(<span class="string">'保存失败'</span>, e)</span><br></pre></td></tr></table></figure>

</div>
</div>
<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"jsonPath":"/live2dw/assets/wanko.model.json"},"display":{"position":"right","width":200,"height":400,"hOffset":50,"vOffset":-95},"mobile":{"show":false},"react":{"opacity":0.7},"log":false});</script></body>

<div align="center">
<img src="/2019/09/19/眼动追踪推荐眼镜/06.png">
</div>


<h3 id="问题记录"><a href="#问题记录" class="headerlink" title="问题记录"></a>问题记录</h3><ul>
<li>编译项目报错 “sketch\app_httpd.cpp:23:20: fatal error: dl_lib.h: No such file or directory”</li>
</ul>
<p>app_httpd.cpp 中注释相应库<br><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">//#include "dl_lib.h"</span></span><br></pre></td></tr></table></figure></p>
<ul>
<li>编译项目报错 “ “WiFi.h” 对应多个库<br>已使用： C:\Users\Administrator\AppData\Local\Arduino15\packages\esp32\hardware\esp32\1.0.3\libraries\WiFi<br>未使用：H:\Program Files\arduino-1.8.3\libraries\WiFi<br>exit status 1 ”</li>
</ul>
<p>移除文件夹 H:\Program Files\arduino-1.8.3\libraries\WiFi</p>
<ul>
<li>点击Start Stream没有反应。</li>
</ul>
<p><div align="center">
<img src="/2019/09/19/眼动追踪推荐眼镜/03.png">
</div><br>使用Chrome浏览器。</p>
<ul>
<li>注意供电。</li>
</ul>
<h1 id="眼动追踪推荐眼镜二：软件篇"><a href="#眼动追踪推荐眼镜二：软件篇" class="headerlink" title="眼动追踪推荐眼镜二：软件篇"></a>眼动追踪推荐眼镜二：软件篇</h1><p>软件部分主要解决下面三个问题：</p>
<ul>
<li>首先是人眼关键点的检测问题，通过多级级联的回归树进行眼眶和通孔的检测，得到关键点特征信息；  </li>
<li>其次是兴趣点的估计问题，通过梯度提升回归算法建立人眼关键点和兴趣点的映射关系；  </li>
<li>最后是兴趣点处的目标识别问题，通过yolo目标检测网络对检测视野中的待推荐目标，判断兴趣点是否落在识别框中。</li>
</ul>
<h2 id="人眼关键点检测"><a href="#人眼关键点检测" class="headerlink" title="人眼关键点检测"></a>人眼关键点检测</h2><p>首先使用人眼摄像头采集人眼图像数据，然后使用dlib自带的image数据库标注工具制作数据集，最后通过dlib的官方代码训练出模型，并对模型进行测试。</p>
<p>模型分别对眼眶和眼珠进行识别，并检测它们的位置。</p>
<ul>
<li>dlib train_object_detector<br><a href="http://dlib.net/train_object_detector.py.html" target="_blank" rel="noopener">http://dlib.net/train_object_detector.py.html</a></li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">import</span> glob</span><br><span class="line"><span class="keyword">import</span> dlib</span><br><span class="line"></span><br><span class="line">options = dlib.simple_object_detector_training_options()</span><br><span class="line"><span class="comment"># 单个眼睛不是左右对称的</span></span><br><span class="line"><span class="comment"># options.add_left_right_image_flips = True</span></span><br><span class="line"><span class="comment"># 支持向量机的C参数，通常默认取为5.自己适当更改参数以达到最好的效果</span></span><br><span class="line">options.C = <span class="number">5</span></span><br><span class="line"><span class="comment"># 线程数，你电脑有4核的话就填4</span></span><br><span class="line">options.num_threads = <span class="number">4</span></span><br><span class="line">options.be_verbose = <span class="literal">True</span></span><br><span class="line"></span><br><span class="line">training_xml_path = <span class="string">"pupil.xml"</span></span><br><span class="line">dlib.train_simple_object_detector(training_xml_path, <span class="string">"pupil.svm"</span>, options)</span><br><span class="line">print(<span class="string">"Training accuracy: &#123;&#125;"</span>.format(</span><br><span class="line">    dlib.test_simple_object_detector(training_xml_path, <span class="string">"pupil.svm"</span>)))</span><br><span class="line"></span><br><span class="line">training_xml_path = <span class="string">"eye.xml"</span></span><br><span class="line">dlib.train_simple_object_detector(training_xml_path, <span class="string">"eye.svm"</span>, options)</span><br><span class="line">print(<span class="string">"Training accuracy: &#123;&#125;"</span>.format(</span><br><span class="line">    dlib.test_simple_object_detector(training_xml_path, <span class="string">"eye.svm"</span>)))</span><br></pre></td></tr></table></figure>
<h2 id="兴趣点映射估计"><a href="#兴趣点映射估计" class="headerlink" title="兴趣点映射估计"></a>兴趣点映射估计</h2><p>分别采集人眼图像中眼眶和眼珠的坐标数据和视野图像中目标点的坐标数据，通过sklearn中的梯度提升回归算法建立人眼关键点数据和兴趣点数据的映射关系。  </p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 读取数据</span></span><br><span class="line">point = pd.read_csv(<span class="string">"csv_data/points_p.csv"</span>)</span><br><span class="line">world_x = point[<span class="string">"world_x"</span>]</span><br><span class="line">world_y = point[<span class="string">"world_y"</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 读取数据中的标签列</span></span><br><span class="line">eye = point[[<span class="string">'eye_x'</span>, <span class="string">'eye_y'</span>, <span class="string">'pipil_x'</span>, <span class="string">'pupil_y'</span>, <span class="string">'pupil_w'</span>, <span class="string">'pupil_h'</span>]]</span><br><span class="line">print(eye)</span><br><span class="line"></span><br><span class="line">clf = GBR(max_depth=<span class="number">10</span>)</span><br><span class="line"><span class="comment"># clf = SGDR(loss='huber',penalty='l2',alpha=0.9,max_iter=1000)</span></span><br><span class="line"><span class="comment"># clf = KNeighborsRegressor(n_neighbors=20, weights="distance", algorithm="ball_tree", leaf_size=50)</span></span><br><span class="line"></span><br><span class="line">clf.fit(eye, world_x)</span><br><span class="line">joblib.dump(clf, <span class="string">"model/world_x.pkl"</span>)</span><br><span class="line">print(<span class="string">'得分：'</span>,clf.score(eye, world_x))</span><br><span class="line"></span><br><span class="line">clf.fit(eye, world_y)</span><br><span class="line">joblib.dump(clf, <span class="string">"model/world_y.pkl"</span>)</span><br><span class="line">print(<span class="string">'得分：'</span>,clf.score(eye, world_y))</span><br></pre></td></tr></table></figure>
<h2 id="目标检测"><a href="#目标检测" class="headerlink" title="目标检测"></a>目标检测</h2><h3 id="yolov3"><a href="#yolov3" class="headerlink" title="yolov3"></a>yolov3</h3><p>制作voc格式数据集，使用keras版本yolov3训练识别模型</p>
<h3 id="ImageAI"><a href="#ImageAI" class="headerlink" title="ImageAI"></a>ImageAI</h3><p>使用ImageAI提供的方法对视野图像进行目标检测。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># coding:utf-8</span></span><br><span class="line"><span class="comment">#  imageai下载地址：https://github.com/OlafenwaMoses/ImageAI</span></span><br><span class="line"><span class="comment">#  resnet50_coco_best_v2.1.0.h5 模型下载地址：https://github.com/fizyr/keras-retinanet/releases/</span></span><br><span class="line"><span class="keyword">from</span> imageai.Detection <span class="keyword">import</span> ObjectDetection  <span class="comment"># 导入了 ImageAI 目标检测类</span></span><br><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line">os.environ[<span class="string">'TF_CPP_MIN_LOG_LEVEL'</span>] = <span class="string">'2'</span></span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">targetDetection</span><span class="params">(imgArray,model_path)</span>:</span></span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">    :param imgArray: 图片数据，类型为ndarray</span></span><br><span class="line"><span class="string">    :param model_path: retinanet模型路径</span></span><br><span class="line"><span class="string">    :return:</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    path = os.path.abspath(model_path)</span><br><span class="line">    detector = ObjectDetection()  <span class="comment"># 定义了目标检测类</span></span><br><span class="line">    detector.setModelTypeAsRetinaNet()  <span class="comment"># 模型的类型设置为 RetinaNet</span></span><br><span class="line">    detector.setModelPath(path)  <span class="comment"># 将模型路径设置为 RetinaNet 模型的路径</span></span><br><span class="line">    detector.loadModel()  <span class="comment"># 模型加载到的目标检测类</span></span><br><span class="line">    <span class="comment"># 调用目标检测函数，解析输入的和输出的图像路径。</span></span><br><span class="line">    detections = detector.detectObjectsFromImage(input_image=imgArray,</span><br><span class="line">                                                 input_type=<span class="string">'array'</span>,output_type=<span class="string">'array'</span>)</span><br><span class="line">    <span class="keyword">return</span> detections</span><br><span class="line"></span><br><span class="line">data = plt.imread(<span class="string">'../img_classify/05-30.jpg'</span>)</span><br><span class="line">model_path = (<span class="string">'../model/resnet50_coco_best_v2.1.0.h5'</span>)</span><br><span class="line">t1 = time.time()</span><br><span class="line">imgInfo = targetDetection(data,model_path)</span><br><span class="line">t2 = time.time()</span><br><span class="line">print(t2-t1)</span><br><span class="line">plt.imshow(imgInfo[<span class="number">0</span>])</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<h3 id="dlib（hog-svm）"><a href="#dlib（hog-svm）" class="headerlink" title="dlib（hog+svm）"></a>dlib（hog+svm）</h3><p>首先使用dlib自带的image数据库标注工具制作数据集，然后通过dlib的官方代码对每一个待检测目标依次训练模型，最后将模型合并进行测试。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">df = pd.DataFrame(</span><br><span class="line">    <span class="number">100</span>*np.ones((<span class="number">6</span>, <span class="number">6</span>)),</span><br><span class="line">    columns=[<span class="string">"name"</span>, <span class="string">"x"</span>, <span class="string">"y"</span>, <span class="string">"w"</span>, <span class="string">"h"</span>, <span class="string">"confidences"</span>],</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">detector1 = dlib.fhog_object_detector(<span class="string">"../model/sz.svm"</span>)</span><br><span class="line">detector2 = dlib.fhog_object_detector(<span class="string">"../model/cz.svm"</span>)</span><br><span class="line">detector3 = dlib.fhog_object_detector(<span class="string">"../model/dp.svm"</span>)</span><br><span class="line">detector4 = dlib.fhog_object_detector(<span class="string">"../model/pb.svm"</span>)</span><br><span class="line">detector5 = dlib.fhog_object_detector(<span class="string">"../model/zb.svm"</span>)</span><br><span class="line">detector6 = dlib.fhog_object_detector(<span class="string">"../model/mf.svm"</span>)</span><br><span class="line"></span><br><span class="line">detectors = [detector1, detector2,detector3, detector4,detector5, detector6]</span><br><span class="line"></span><br><span class="line">[boxes, confidences, detector_idxs] = dlib.fhog_object_detector.run_multiple(detectors, image, upsample_num_times=<span class="number">1</span>, adjust_threshold=<span class="number">0.0</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(len(boxes)):</span><br><span class="line">    <span class="comment"># print("detector &#123;&#125; found box &#123;&#125; with confidence &#123;&#125;.".format(detector_idxs[i], boxes[i], confidences[i]))</span></span><br><span class="line">    df.iloc[i, <span class="number">0</span>] = detector_idxs[i]</span><br><span class="line">    df.iloc[i, <span class="number">1</span>] = boxes[i].left()</span><br><span class="line">    df.iloc[i, <span class="number">2</span>] = boxes[i].top()</span><br><span class="line">    df.iloc[i, <span class="number">3</span>] = boxes[i].right() - boxes[i].left()</span><br><span class="line">    df.iloc[i, <span class="number">4</span>] = boxes[i].bottom() - boxes[i].top()</span><br><span class="line">    df.iloc[i, <span class="number">5</span>] = round(confidences[i], <span class="number">6</span>)</span><br></pre></td></tr></table></figure>
</the>]]></content>
  </entry>
  <entry>
    <title>随笔_2021小结</title>
    <url>/2021/12/28/%E9%9A%8F%E7%AC%94_2021%E5%B9%B4%E7%9A%84%E5%B0%8F%E7%BB%93/</url>
    <content><![CDATA[<!-- ** 随笔_2021小结 ** <Excerpt in index | 首页摘要> -->
<blockquote>
<p>来不及二周目，也没有时间全收集，少年被时间推搡来到了大人的世界，我承认自己没有准备，但我依然要背起行囊继续前进，期待往后的故事，期待未来的成长。</p>
</blockquote>
<a id="more"></a>
<the rest of contents | 余下全文>

<h2 id="读过的文"><a href="#读过的文" class="headerlink" title="读过的文"></a>读过的文</h2><html>
    <body>
        <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/echarts@5.2.2/dist/echarts.min.js"></script>
        <div id="aaa" class="chart-container" style="width:760px; height:570px;"></div>
        <script type="text/javascript">
          var dom = document.getElementById("aaa");
          var myChart = echarts.init(dom, 'white', {renderer: 'canvas'});
          var app = {};
          var option;
          const colors = ['#FFAE57', '#FF7853', '#EA5151', '#CC3F57', '#9A2555'];
          const bgColor = '#2E2733';
          const itemStyle = {
            star5: {
              color: colors[0]
            },
            star4: {
              color: colors[1]
            },
            star3: {
              color: colors[2]
            },
            star2: {
              color: colors[3]
            }
          };
          const data = [
            {
              name: '虚构',
              itemStyle: {
                color: colors[1]
              },
              children: [
                {
                  name: '小说',
                  children: [
                    {
                      name: '5☆',
                      children: [
                        {
                          name: '小王子'
                        },
                        {
                          name: '首无·作祟之物'
                        },
                        {
                          name: '金色梦乡'
                        },
                        {
                          name: '余生皆假期'
                        }
                      ]
                    },
                    {
                      name: '4☆',
                      children: [
                        {
                          name: '恶意'
                        },
                        {
                          name: '偷影子的人'
                        },
                        {
                          name: '阳光劫匪倒转地球'
                        }
                      ]
                    },
                    {
                      name: '3☆',
                      children: [
                        {
                          name: '死神的精确度'
                        },
                        {
                          name: '百年孤独'
                        },
                        {
                          name: '三口棺材'
                        }
                      ]
                    }
                  ]
                },
                {
                  name: '其他',
                  children: [
                    {
                      name: '5☆',
                      children: [
                        {
                          name: '希腊神话故事集'
                        },
                      ]
                    },
                    {
                      name: '4☆',
                      children: [
                        {
                          name: '不能承受的生命之轻'
                        },
                      ]
                    },
                    {
                      name: '3☆',
                      children: [
                        {
                          name: '彩虹牙刷'
                        }
                      ]
                    }
                  ]
                }
              ]
            },
            {
              name: '非虚构',
              itemStyle: {
                color: colors[2]
              },
              children: [
                {
                  name: '社科',
                  children: [
                    {
                      name: '4☆',
                      children: [
                        {
                          name: '投资中最简单的事'
                        },
                        {
                          name: '不一样的成功启示录：异类'
                        }
                      ]
                    }
                  ]
                },
                {
                  name: '心理',
                  children: [
                    {
                      name: '5☆',
                      children: [
                        {
                          name: '人格心理学'
                        },
                        {
                          name: '被讨厌的勇气'
                        }
                      ]
                    },
                    {
                      name: '4☆',
                      children: [
                        {
                          name: '自卑与超越'
                        },
                      ]
                    },
                    {
                      name: '3☆'
                    },
                    {
                      name: '2☆',
                    }
                  ]
                },
                {
                  name: '诗歌',
                  children: [
                    {
                      name: '4☆',
                      children: [
                        {
                          name: '二十首情诗与一首绝望的歌'
                        }
                      ]
                    }
                  ]
                },
                {
                  name: '绘本',
                  children: [
                    {
                      name: '5☆',
                      children: [
                        {
                          name: '可是你真的真的很可爱'
                        }
                      ]
                    },
                    {
                      name: '3☆',
                      children: [
                        {
                          name: '芬兰人的噩梦'
                        }
                      ]
                    }
                  ]
                },
                {
                  name: '哲学',
                  children: [
                    {
                      name: '4☆',
                      children: [
                        {
                          name: '西西弗斯神话'
                        }
                      ]
                    }
                  ]
                },
                {
                  name: '技术',
                  children: [
                    {
                      name: '5☆', 
                      children: [
                        {
                          name: '人月神话'
                        },
                        {
                          name: '黑客与画家'
                        },
                        {
                          name: '游戏设计艺术'
                        },
                      ]
                    },
                    {
                      name: '4☆',
                      children: [
                        {
                          name: '指数基金投资指南'
                        }
                      ]
                    },
                    {
                      name: '3☆',
                      children: [
                        {
                          name: '日本蜡烛图技术'
                        }
                      ]
                    }
                  ]
                }
              ]
            }
          ];
          for (let j = 0; j < data.length; ++j) {
            let level1 = data[j].children;
            for (let i = 0; i < level1.length; ++i) {
              let block = level1[i].children;
              let bookScore = [];
              let bookScoreId;
              for (let star = 0; star < block.length; ++star) {
                let style = (function (name) {
                  switch (name) {
                    case '5☆':
                      bookScoreId = 0;
                      return itemStyle.star5;
                    case '4☆':
                      bookScoreId = 1;
                      return itemStyle.star4;
                    case '3☆':
                      bookScoreId = 2;
                      return itemStyle.star3;
                    case '2☆':
                      bookScoreId = 3;
                      return itemStyle.star2;
                  }
                })(block[star].name);
                block[star].label = {
                  color: style.color,
                  downplay: {
                    opacity: 0.5
                  }
                };
                if (block[star].children) {
                  style = {
                    opacity: 1,
                    color: style.color
                  };
                  block[star].children.forEach(function (book) {
                    book.value = 1;
                    book.itemStyle = style;
                    book.label = {
                      color: style.color
                    };
                    let value = 1;
                    if (bookScoreId === 0 || bookScoreId === 3) {
                      value = 5;
                    }
                    if (bookScore[bookScoreId]) {
                      bookScore[bookScoreId].value += value;
                    } else {
                      bookScore[bookScoreId] = {
                        color: colors[bookScoreId],
                        value: value
                      };
                    }
                  });
                }
              }
              level1[i].itemStyle = {
                color: data[j].itemStyle.color
              };
            }
          }
          option = {
            backgroundColor: bgColor,
            color: colors,
            series: [
              {
                type: 'sunburst',
                center: ['50%', '48%'],
                data: data,
                sort: function (a, b) {
                  if (a.depth === 1) {
                    return b.getValue() - a.getValue();
                  } else {
                    return a.dataIndex - b.dataIndex;
                  }
                },
                label: {
                  rotate: 'radial',
                  color: bgColor
                },
                itemStyle: {
                  borderColor: bgColor,
                  borderWidth: 2
                },
                levels: [
                  {},
                  {
                    r0: 0,
                    r: 40,
                    label: {
                      rotate: 0
                    }
                  },
                  {
                    r0: 40,
                    r: 105
                  },
                  {
                    r0: 115,
                    r: 140,
                    itemStyle: {
                      shadowBlur: 2,
                      shadowColor: colors[2],
                      color: 'transparent'
                    },
                    label: {
                      rotate: 'tangential',
                      fontSize: 10,
                      color: colors[0]
                    }
                  },
                  {
                    r0: 140,
                    r: 145,
                    itemStyle: {
                      shadowBlur: 80,
                      shadowColor: colors[0]
                    },
                    label: {
                      position: 'outside',
                      textShadowBlur: 5,
                      textShadowColor: '#333'
                    },
                    downplay: {
                      label: {
                        opacity: 0.5
                      }
                    }
                  }
                ]
              }
            ]
          };
          if (option && typeof option === 'object') {
              myChart.setOption(option);
          }
        </script>
    </body>
</html>

<p>狐狸：你看！你看到那边的麦田没有？我不吃面包，麦子对我来说，一点意义也没有。我对麦田无动于衷。而这，真使人扫兴。但是，你有着金黄色的头发，那么，一旦你驯服了我，这就会十分美妙！麦子，是金黄色的，它就会让我想起你。而且，我甚至会喜欢听那风吹麦穗的声音。<br>   —— 安东尼·德·圣-埃克苏佩里《小王子》</p>
<p>我把西西弗斯留在山脚！人门总会一次又一次地拾起自己的重担。但西西弗斯告诫我们，还有更高的忠诚，它可以否定神祇，举起巨石。他最终也发现，一切安好。从此，这个没有主人的宇宙对他而言，既不贫瘠也非无望。那块石头的每一颗微粒，那座夜色笼罩的山上的每一片矿石，本身都是一个世界。迈向高处的挣扎本身足够填满一个人的心灵。人们应当想象西西弗斯是快乐的。<br>   —— 加缪《西西弗斯神话》</p>
<h2 id="听过的歌"><a href="#听过的歌" class="headerlink" title="听过的歌"></a>听过的歌</h2><ul>
<li>所爱如月色，触手而不得</li>
</ul>
<iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width="330" height="86" src="//music.163.com/outchain/player?type=2&id=1476239407&auto=1&height=66"></iframe>
<br><br>
<iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width="330" height="86" src="//music.163.com/outchain/player?type=2&id=386691&auto=1&height=66"></iframe>

<h2 id="玩过的游戏"><a href="#玩过的游戏" class="headerlink" title="玩过的游戏"></a>玩过的游戏</h2><ul>
<li>Team Cherry 空洞骑士 (135h+)</li>
</ul>
<p><img src="/2021/12/28/随笔_2021年的小结/空洞骑士.jpg" width="800" height="450"></p>
<blockquote>
<p>没有可以思考的心智。<br>没有可以屈从的意志。<br>没有为苦难哭泣的声音。<br>生于神与虚空之手。<br>你必封印在众人梦中散布瘟疫的障目之光。<br>你是容器。<br>你是空洞骑士。</p>
</blockquote>
<ul>
<li>Matt Makes Games 蔚蓝 (25h+)</li>
</ul>
<p><img src="/2021/12/28/随笔_2021年的小结/蔚蓝.jpg" width="800" height="450"></p>
<blockquote>
<p>闭上眼睛，拍在你面前飘荡的羽毛，你的呼吸让那羽毛一直飘着，平稳缓慢地呼吸，吸气、吐气。看到了么？每次都很轻松。</p>
</blockquote>
<ul>
<li>Moon Studios 奥日与黑暗森林 (10h+)</li>
</ul>
<p><img src="/2021/12/28/随笔_2021年的小结/奥日与黑暗森林.jpg" width="800" height="450"></p>
<blockquote>
<p>我有一个梦，也许有一天，灿烂的阳光能照进黑暗森林。</p>
</blockquote>
<ul>
<li>Moon Studios 精灵与萤火意志 (30h+)</li>
</ul>
<p><img src="/2021/12/28/随笔_2021年的小结/精灵与萤火意志.jpg" width="800" height="450"></p>
<blockquote>
<p>如果一个生物从未见过光芒，它还有可能真的逃离黑暗吗？</p>
</blockquote>
<ul>
<li>Super Giant Game 哈迪斯 (20h+)</li>
</ul>
<p><img src="/2021/12/28/随笔_2021年的小结/哈迪斯.jpg" width="800" height="450"></p>
<blockquote>
<p>把我跟普罗米修斯栓一块儿，再派一只大鸟不停地啄食我的内脏就行了。</p>
</blockquote>
<ul>
<li>Kan ‘Reives’ Gao 去月球 (云通关)</li>
</ul>
<p><img src="/2021/12/28/随笔_2021年的小结/去月球.jpg" width="800" height="450"></p>
<blockquote>
<p>-那如果你忘记了…或者走丢了呢？<br>-那我们总会在月亮上相遇的。傻瓜！</p>
</blockquote>
<ul>
<li>Nintendo 健身环大冒险 (210h+)</li>
</ul>
<p><img src="/2021/12/28/随笔_2021年的小结/健身环大冒险.jpg" width="800" height="450"></p>
<blockquote>
<p>Thank you for exercising!</p>
</blockquote>
<ul>
<li>Nintendo 马里奥3D世界+库巴狂怒世界 (30h+)</li>
</ul>
<p><img src="/2021/12/28/随笔_2021年的小结/马里奥3D世界.jpg" width="800" height="450"></p>
<blockquote>
<p>Course Clear!</p>
</blockquote>
<ul>
<li>Nintendo 超级马里奥银河 (20h+)</li>
</ul>
<p><img src="/2021/12/28/随笔_2021年的小结/超级马里奥银河.jpg" width="800" height="450"></p>
<blockquote>
<p>相传每隔100年，就会有成千上万的星屑掉下来（但是从没砸到过人），蘑菇王国的村民们把星屑们收集起来，制成巨大的巨星。</p>
</blockquote>
<h2 id="快乐的时光"><a href="#快乐的时光" class="headerlink" title="快乐的时光"></a>快乐的时光</h2><ul>
<li><p>5.29</p>
</li>
<li><p>10.6</p>
</li>
</ul>
<h2 id="一些旧的知识"><a href="#一些旧的知识" class="headerlink" title="一些旧的知识"></a>一些旧的知识</h2><p><img src="/2021/12/28/随笔_2021年的小结/冬季星空.jpg"></p>
<h2 id="一些新的尝试"><a href="#一些新的尝试" class="headerlink" title="一些新的尝试"></a>一些新的尝试</h2><html>
<body>
    <script type="text/javascript" src="https://assets.pyecharts.org/assets/echarts.min.js"></script>
    <script type="text/javascript" src="https://assets.pyecharts.org/assets/echarts-wordcloud.min.js"></script>
    <div id="11c49d00faa448b291d718f348be1d69" class="chart-container" style="width:800px; height:500px;"></div>
    <script type="text/javascript">
        var chart_11c49d00faa448b291d718f348be1d69 = echarts.init(
            document.getElementById('11c49d00faa448b291d718f348be1d69'), 'white', {renderer: 'canvas'});
        var maskImage_16c70d54c9154ea3b38160d5edca7259 = new Image();
        maskImage_16c70d54c9154ea3b38160d5edca7259.src = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAAAAXNSR0IArs4c6QAAEGNJREFUeF7tnQnQdmMZx3/NIJQsJUSbZVISE2mxpGUoWyNZQ4WyJa0YDH2DoYQoRcJEKSJFkpKQiEjSphBpzGSvLKN9/vOdN+/39Dzvc5b7Ouc+z/O/Zs5838xz7uu67t99/u99lnt5GrZUBF4LbAo8D1hx1vFM4K5Zx93F/28FfpUquP3EEHhajNup8LousCEwI4xn1aj174ALge8DPwT+XcOHiwQSsECqw90c2AXYvnrROUvcWwjlfODbiX3bXU0CFkh5cLsDOwMbly9S+8yLgU8C19T24IJJCFgg4zEuBpwNbDP+1KRnPAkcDByf1KudVSJggcyNayPgXGD5SlTTnqz4O6R1aW9lCVggo0l9GDiuLMjg8+4sbu3uCY5j9wMELJDhl8RuwOkZXi3q0X6UYV4Tm5IF8v9Nuy1wXsYtrlfLfnhvqYEskAVB5y6OmWy3AC5p6RqZ6jAWyFPN/wbgih5dDfpQeVOFfFcB1gFeNqLMw8XHyl9U8Dnxp1og85t4kUIc6/eoxa8ENgOeGJLzwoB6mbWK49XACiXrdh/wA+A64Abg+pLlJvI0C2R+sx4DHNjDFp4HfHxW3hKBPma+C1gjUX1uBs4ojscT+eyNGwsEtgQu6k2L/X+i6in+COwE7FoMloyozm2zhPJARIAcfVog8FNA9/N9Nb3R0rOFvvi3YfoWox5lds/VRtxOYky7QDTg8GudkO9/0MuAPYA/9b8qo2sw7QLRqFmNzrXVI/DXQiRfr1c8/1LTLBCNytUcDFtzAicAGpozcTbNAvkioCHstjQELi1eO6fxlomXaRWIvnvcAayUSTtMShp7A6dMSmVUj2kViMYzXT1JDZlRXTQiQR8xJ8KmVSAfBY6diBbMrxKPAmsXPXR+2VXMaFoFonnfbc8QrNg0vT798mKoi2ZF9tomTSCa+aePZvp3uYHjEUCHvgJrhp6fP2Iv3SOAw2JDxHufBIG8pphtt1WxBE88NUcoQ0B/iDQeTIMfe2t9FYgG5e1ZLL2zem/pT37ies47oM/V7JtAZoTx3sBBeX1uz9xyfwxYdsSQ/NxyHZpPXwSyKHAQYGH04rJaIMmji+WL+pd5T76D6BbqNGCDXhJ20lpOdV9AMxV16DVwbyz3HuQtwFeBpXpD1InORUDimBHKLcyfalBl2nDrdHMWyF7A51sn4oBtE/gCoCNLoeQqkH2Ak9tuKcfrlECWQslRIFp1w/tmdHqtdhpcQjkUuL/TLIrguQnkGYD2zNAmNLbpJaDnlP1yGFCam0DOBN49vdeFaz5AQM+hp3ZJJSeBaBGAw7uE4dhZEjgJ2L+rzHIRyMuBa4ElugLhuFkT0BZ1m3SRYS4C8a1VF63fr5iDi+S1kn0OAtGqIt6Tr5Xm7n0QXSvfabMWOQhEC0ZrmqbNBMoQ0GxFfYVvxboWyI7AOa3U1EEmhYAW09Zyq60sf9q1QDQIUavz2UygCoELgHdUKVD33K4For33Xlw3eZebagJvBb4bTaBLgWjBaI3mtJlAHQJa7nS7OgWrlOlSINoD/KgqyfpcExggoOVjr4qk0qVAtC6uKmgzgboEzio2C6pbfmy5LgXya+ClYzP0CSYwNwFtL6et4kKsS4E8BCwdUis7nSYCxwFaKTPEuhKIFo/u/ap7IS1ip1UJaMPRN1ctVPb8rgTy/GJfvbJ5+jwTGEXgQeA5UXi6Eohf8Ua16HT6XRP4ZUTVuxKId3eKaM3p9andfc+OqL4FEkHVPtsmELYFXBcCWRw4pphz3DZIx5tMAtqwJ2REeNsC0bYDWhZ/1clsJ9eqIwKaIxKyW3GbAtHcYq1UYTOB1AS0IdK2qZ3KX1sCkcI1+tJmAhEEwoactCEQTacN6f4iSNtnLwloiVqtxpncogXiJUSTN5kdDiEQNtwkUiB6INfK7DYTiCYQth9ilEC0vq7WMvISotGXhv2LgHYs/kYEiiiBXARsGZGwfZrAEALa5i1kEYcIgXgJUV/DbRL4DaA7lhBLLRBtsnmjb61C2spOhxPQdgna8TjEUgvEvUdIM9npHAR2Ab4cRSilQJYBbnXvEdVU9juCwIuAu6PopBTIOyOVHAXAfntPQNdd2OqcKQWibk7J2kygbQKrAbdHBE0lkGcBfwB0m2UzgbYJXANsGBE0lUA0aV4fBm0m0BWBzwAfSB08lUAOAY5MnZz9mUBFApsC36tYZs7TUwnEX85Ttop91SWgeeman57MUgnkDmDlZFnZkQnUJ7AWoG2kk1gKgSwM/D1JNnZiAs0JfAr4WHM38z2kEIh2qNUHQpsJ5EDgz8Wazw+nSCaFQLzGVYqWsI+UBDQX6dwUDi2QFBTtIzcCp6fa2s8Cya1pnU8KAvcAL0jhKIVA1gO086jNBHIi8JoU12UKgSwJPJITGediAsA8QNMvGlkKgSiBewFNlrKZQC4Ekqx0kkog3m8wl8vCecwQSDLTMJVAPJPQF2ZuBLTk1E5Nk0olkM2AS5om4/ImkJDAxcBWTf2lEoieP/QcYjOBXAgk2RIhlUAERfNBwjZTzIW68+gNgewEcmCxMU5vCDrRiSaQnUDWKdbEmmjqrlxvCGT1kD5DTRNWdu4NQic6yQSOAg5tWsGUzyDKZXXgKuC5TRNzeRNoSGB34IyGPpLMBxnMQRPnT2yamMubQEMC2tRTzyGNLHUPMpOMd5Vq1Cwu3JDAE4B2U25sUQJ5LXA1sFDjDO3ABKoT0F4h2jOksUUJRIl5+Enj5rGDmgQ+DJxQs+wCxSIFokBejjRFK9lHVQLrAjdVLTTs/GiBKKZH+qZoKfsoSyDJKN6ZYG0IRLF0T7h12Rr6PBNoQCBZ76Ec2hKIYmki/W4NKu6iJjCOQNLeo22BKN5/xtXQv5tATQJ/Al4P3Fmz/NBibfYgFkjKlrOvQQJ7AaemxtK2QP4CaC8RmwmkJHAB8I6UDtt+SJ+Jp012tKeczQRSEdBSo5ukXLB6dmJt9yB6N/3KVGTsxwSKeeca2h5ibQvkWynmCYeQsNM+Evhg9MDYtgVyAPCJPraEc86OgEaNa9u1UGtbIOsD2nDRZgJNCLwJuKKJg7Jl2xaI8vK3kLKt4/MGCdwMvDfVOKsyeLsQiJ9DyrSMz5lN4J/FgiDHAI+1iaYLgewNfK7NSjpWrwnoD6qE8ZMuatGFQNaMemfdBUDHDCOglRE1tkqzUzuzLgSiynrb6M6aPPvA2udcb6huyyHTrgSyBaC/EDYTGCSQdJfapni7Eoh7kaYtN7nldwW0vloW1qVANH7msiwoOImcCKyV0zNqlwJRo5wC7JlT6ziXTglo4OHynWYwELxrgawG/BhYNicozqUzAnpA37Sz6EMCdy0QpbQPcHJOUJxLZwSyekAXhRwEojw8X72zazKbwPpa/irg59lklJFAxORyQIPQbNNJ4CRg/9yqnksPMsPleOBDuUFyPuEE/gasB/w2PFLFALkJROl7ydKKjTgBp2uO0EE51iNHgYjT+4oBakvnCM05JSVwX9F73J3UayJnuQpE1dOWbhrF6Y1BEzV2pm7mFXcNWaaXs0BmgL0f0PGSLAk6qSYELgTe3sRBdNk+CEQMlgT2A/YAXhgNxf5bIXBH8UfvX61EqxmkLwKZqd4SwA7F8caadR4sdinwleLw95hEUEu4eQVwa4nzOj2lbwKZDUvPKHo+mTnKgtSrxBuBnwLXFf/OLqvXjWf5lq4szlrnbQ+cV6tky4X6LJBBVKsCGtulf58968fHgduL4/eA9q8rY/sCny1zos+pRCDrh/LBmkySQCq1UoWTvwRojoKtOQHtXdnJ3PK6qVsg5cjd1bOXAxrPpO3vdOgDnFYg7NKuB7YF7ukyiTqxLZBy1FYG9NYlZ9P+GLqv10rn1w4kukvxXNVF/qcB2prg310EbxrTAilPUNNAdx5yuv5aazG8NYBFyrtrfOaDxQJqWhBch2ZnPjrE60aFcJZrHLGaA70MOTfnj4BlqmOBlKH01DmjVoXULYxWGJdIBo9lqoWY8+yvAT8DtMKgDolkLjuxWCEkYQpjXV0CKE8dGsLea7NAqjWflr3UWk2D9jCg27BHBn7QTEkJRjv9prA3AFeWcLRBcYGuOMe5WsBvKWAzYMMSPuc6ReOpZkShV+cTYxZI9aa8F1hhSDFtXK8N7Adt4xYFslCxev6wPGby+iagZ5LZt2P6ALt5IRYJZvZr8sH66FlCvZduLWcfw27vqtPNrIQFUr1B1i4ukGEl9dstAz+0JRDN5dYefaOG4uh7kIShLbnH2dOBxQeOxYB/FHXv5QP3uEoP+90CqUNt/sPndkOK6uLbpmWBaJzawYD2XhllEo7eJNkqErBAKgIrTtc8lYdGFH1bsbTqzM+RPcjWwLHAKiNy0Z6Q7waurldNl7JA6l8Do4ai6JXrurPcRghEz0CHAMphlB0BHFa/ei4pAhZIs+vggREPtFp8QIsQyFILZCXg0DkGU+qrtW6nslodpBnm7kpbIM3Yj1o+9f5iRqSGVqQUyJnAe+ZIWQtefLpZlVx6NgELpPn1oAdzPQsMmlZo+UhigYzKVivlq9fSM4ctIQELpDlMTQUetVyNPsDp20SqD4WD2T4J6IOfehZbAAELJA1UPTAfOcSVBg5qTkmEQDQ2TENcRr1NS1OzKfdigaS5ABYFNNxCX6QHTR/nUu53oecaPWtIfLZgAhZIOsAa6TtMCHrtq+nBKUy9kcTR+0GAKWC04cMCSUtZG05qTFOUlR2sGBV/6vxaIGmbXA/lkV+tLZC07TXWmwUyFlHlE/QdImqVcgukcnM0K2CBNOM3rPQLgN8BGhGb2iyQ1ETH+LNAYoDrQVofClObBZKaqAXSMtGnwmnvxdcljm6BJAY6zp17kHGE6v+ueSHn1y8+tKQFkhjoOHcWyDhCzX4/B9ixmYsFSlsgCWGWcWWBlKFU/xzNC7kh4bQCC6R+W9QqaYHUwlap0NEJtxezQCqhb36yBdKc4TgPKeeDWCDjaCf+3QJJDHSIOwsknnFYBAskDO3/HFsg8YzDIlggYWgtkHi08REskHjG7kHiGYdFsEDC0LoHiUcbH8ECiWfsHiSecVgECyQMrXuQeLTxESyQeMbuQeIZh0WwQMLQugeJRxsfwQKJZ+weJJ5xWAQLJAyte5B4tPERLJB4xu5B4hmHRbBAwtC6B4lHGx/BAoln7B4knnFYBAskDK17kHi08REskHjG7kHiGYdFsEDC0LoHiUcbH8ECiWfsHiSecVgECyQMrXuQeLTxESyQeMbuQeIZh0WwQMLQugeJRxsfwQKJZ+weJJ5xWAQLJAyte5B4tPERLJB4xu5B4hmHRbBAwtC6B4lHGx/BAoln7B4knnFYBAskDK17kHi08REskHjG7kHiGYdFsEDC0LoHiUcbH8ECiWfsHiSecVgECyQMrXuQeLTxESyQeMbuQeIZh0WwQMLQugeJRxsfwQKJZ+weJJ5xWAQLJAyte5B4tPERLJB4xu5B4hmHRbBAwtC6B4lHGx/BAoln7B4knnFYBAskDK17kHi08REskHjG7kHiGYdFsEDC0LoHiUcbH8ECiWfsHiSecVgECyQM7QI9yOGJwswDrkzky25KEPgv5BA351cLdGEAAAAASUVORK5CYII=';
        var option_11c49d00faa448b291d718f348be1d69 = {
    "animation": true,
    "animationThreshold": 2000,
    "animationDuration": 1000,
    "animationEasing": "cubicOut",
    "animationDelay": 0,
    "animationDurationUpdate": 300,
    "animationEasingUpdate": "cubicOut",
    "animationDelayUpdate": 0,
    "color": [
        "#c23531",
        "#2f4554",
        "#61a0a8",
        "#d48265",
        "#749f83",
        "#ca8622",
        "#bda29a",
        "#6e7074",
        "#546570",
        "#c4ccd3",
        "#f05b72",
        "#ef5b9c",
        "#f47920",
        "#905a3d",
        "#fab27b",
        "#2a5caa",
        "#444693",
        "#726930",
        "#b2d235",
        "#6d8346",
        "#ac6767",
        "#1d953f",
        "#6950a1",
        "#918597"
    ],
    "series": [
        {
            "type": "wordCloud",
            "maskImage": maskImage_16c70d54c9154ea3b38160d5edca7259,
            "rotationRange": [
                -90,
                90
            ],
            "rotationStep": 45,
            "girdSize": 20,
            "sizeRange": [
                10,
                60
            ],
            "data": [
                {
                    "name": "\u6cd5\u6850",
                    "value": 10,
                    "textStyle": {
                        "normal": {
                            "color": "rgb(50,85,81)"
                        }
                    }
                },
                {
                    "name": "\u6cd5\u6850 ",
                    "value": 15,
                    "textStyle": {
                        "normal": {
                            "color": "rgb(10,110,3)"
                        }
                    }
                },
                {
                    "name": "\u6cd5\u6850  ",
                    "value": 25,
                    "textStyle": {
                        "normal": {
                            "color": "rgb(37,112,48)"
                        }
                    }
                },
                {
                    "name": "\u94f6\u674f",
                    "value": 20,
                    "textStyle": {
                        "normal": {
                            "color": "rgb(117,0,34)"
                        }
                    }
                },
                {
                    "name": "\u94f6\u674f ",
                    "value": 25,
                    "textStyle": {
                        "normal": {
                            "color": "rgb(92,95,39)"
                        }
                    }
                },
                {
                    "name": "\u94f6\u674f  ",
                    "value": 45,
                    "textStyle": {
                        "normal": {
                            "color": "rgb(48,48,89)"
                        }
                    }
                },
                {
                    "name": "\u4e1b\u751f\u4e94\u89d2\u67ab",
                    "value": 30,
                    "textStyle": {
                        "normal": {
                            "color": "rgb(121,142,62)"
                        }
                    }
                },
                {
                    "name": "\u4e1b\u751f\u4e94\u89d2\u67ab ",
                    "value": 35,
                    "textStyle": {
                        "normal": {
                            "color": "rgb(29,4,151)"
                        }
                    }
                },
                {
                    "name": "\u4e1b\u751f\u4e94\u89d2\u67ab  ",
                    "value": 50,
                    "textStyle": {
                        "normal": {
                            "color": "rgb(158,117,3)"
                        }
                    }
                },
                {
                    "name": "\u7d2b\u53f6\u674e",
                    "value": 14,
                    "textStyle": {
                        "normal": {
                            "color": "rgb(69,57,97)"
                        }
                    }
                },
                {
                    "name": "\u7d2b\u53f6\u674e ",
                    "value": 24,
                    "textStyle": {
                        "normal": {
                            "color": "rgb(39,111,46)"
                        }
                    }
                },
                {
                    "name": "\u7d2b\u53f6\u674e  ",
                    "value": 34,
                    "textStyle": {
                        "normal": {
                            "color": "rgb(157,45,71)"
                        }
                    }
                },
                {
                    "name": "\u91d1\u94f6\u6728",
                    "value": 50,
                    "textStyle": {
                        "normal": {
                            "color": "rgb(123,146,96)"
                        }
                    }
                },
                {
                    "name": "\u91d1\u94f6\u6728 ",
                    "value": 25,
                    "textStyle": {
                        "normal": {
                            "color": "rgb(136,57,49)"
                        }
                    }
                },
                {
                    "name": "\u91d1\u94f6\u6728  ",
                    "value": 45,
                    "textStyle": {
                        "normal": {
                            "color": "rgb(62,31,62)"
                        }
                    }
                },
                {
                    "name": "\u6986\u53f6\u6885",
                    "value": 10,
                    "textStyle": {
                        "normal": {
                            "color": "rgb(135,89,123)"
                        }
                    }
                },
                {
                    "name": "\u6986\u53f6\u6885 ",
                    "value": 16,
                    "textStyle": {
                        "normal": {
                            "color": "rgb(115,38,44)"
                        }
                    }
                },
                {
                    "name": "\u6986\u53f6\u6885  ",
                    "value": 30,
                    "textStyle": {
                        "normal": {
                            "color": "rgb(14,56,155)"
                        }
                    }
                },
                {
                    "name": "\u5c0f\u6843\u7ea2",
                    "value": 20,
                    "textStyle": {
                        "normal": {
                            "color": "rgb(70,11,27)"
                        }
                    }
                },
                {
                    "name": "\u5c0f\u6843\u7ea2 ",
                    "value": 23,
                    "textStyle": {
                        "normal": {
                            "color": "rgb(37,51,27)"
                        }
                    }
                },
                {
                    "name": "\u5c0f\u6843\u7ea2  ",
                    "value": 28,
                    "textStyle": {
                        "normal": {
                            "color": "rgb(29,100,35)"
                        }
                    }
                },
                {
                    "name": "\u7ea2\u6a31",
                    "value": 30,
                    "textStyle": {
                        "normal": {
                            "color": "rgb(134,7,138)"
                        }
                    }
                },
                {
                    "name": "\u7ea2\u6a31 ",
                    "value": 10,
                    "textStyle": {
                        "normal": {
                            "color": "rgb(17,88,80)"
                        }
                    }
                },
                {
                    "name": "\u7ea2\u6a31  ",
                    "value": 43,
                    "textStyle": {
                        "normal": {
                            "color": "rgb(55,131,136)"
                        }
                    }
                },
                {
                    "name": "\u56fd\u69d0",
                    "value": 40,
                    "textStyle": {
                        "normal": {
                            "color": "rgb(58,70,69)"
                        }
                    }
                },
                {
                    "name": "\u56fd\u69d0 ",
                    "value": 26,
                    "textStyle": {
                        "normal": {
                            "color": "rgb(51,104,52)"
                        }
                    }
                },
                {
                    "name": "\u56fd\u69d0  ",
                    "value": 23,
                    "textStyle": {
                        "normal": {
                            "color": "rgb(41,118,158)"
                        }
                    }
                },
                {
                    "name": "\u767d\u8721",
                    "value": 50,
                    "textStyle": {
                        "normal": {
                            "color": "rgb(84,92,104)"
                        }
                    }
                },
                {
                    "name": "\u767d\u8721 ",
                    "value": 15,
                    "textStyle": {
                        "normal": {
                            "color": "rgb(126,121,117)"
                        }
                    }
                },
                {
                    "name": "\u767d\u8721  ",
                    "value": 25,
                    "textStyle": {
                        "normal": {
                            "color": "rgb(16,102,36)"
                        }
                    }
                },
                {
                    "name": "\u66b4\u9a6c\u4e01\u9999",
                    "value": 20,
                    "textStyle": {
                        "normal": {
                            "color": "rgb(156,17,85)"
                        }
                    }
                },
                {
                    "name": "\u66b4\u9a6c\u4e01\u9999 ",
                    "value": 46,
                    "textStyle": {
                        "normal": {
                            "color": "rgb(118,23,109)"
                        }
                    }
                },
                {
                    "name": "\u66b4\u9a6c\u4e01\u9999  ",
                    "value": 29,
                    "textStyle": {
                        "normal": {
                            "color": "rgb(69,126,80)"
                        }
                    }
                },
                {
                    "name": "\u68a8\u6811",
                    "value": 30,
                    "textStyle": {
                        "normal": {
                            "color": "rgb(102,27,4)"
                        }
                    }
                },
                {
                    "name": "\u68a8\u6811 ",
                    "value": 23,
                    "textStyle": {
                        "normal": {
                            "color": "rgb(120,83,120)"
                        }
                    }
                },
                {
                    "name": "\u68a8\u6811  ",
                    "value": 20,
                    "textStyle": {
                        "normal": {
                            "color": "rgb(3,97,96)"
                        }
                    }
                },
                {
                    "name": "\u7ea2\u67ab",
                    "value": 40,
                    "textStyle": {
                        "normal": {
                            "color": "rgb(22,127,94)"
                        }
                    }
                },
                {
                    "name": "\u7ea2\u67ab ",
                    "value": 44,
                    "textStyle": {
                        "normal": {
                            "color": "rgb(127,94,89)"
                        }
                    }
                },
                {
                    "name": "\u7ea2\u67ab  ",
                    "value": 17,
                    "textStyle": {
                        "normal": {
                            "color": "rgb(59,52,42)"
                        }
                    }
                },
                {
                    "name": "\u67ff",
                    "value": 50,
                    "textStyle": {
                        "normal": {
                            "color": "rgb(96,58,10)"
                        }
                    }
                },
                {
                    "name": "\u67ff ",
                    "value": 27,
                    "textStyle": {
                        "normal": {
                            "color": "rgb(112,3,13)"
                        }
                    }
                },
                {
                    "name": "\u67ff  ",
                    "value": 36,
                    "textStyle": {
                        "normal": {
                            "color": "rgb(108,31,33)"
                        }
                    }
                },
                {
                    "name": "\u5c71\u6942",
                    "value": 20,
                    "textStyle": {
                        "normal": {
                            "color": "rgb(122,51,152)"
                        }
                    }
                },
                {
                    "name": "\u5c71\u6942 ",
                    "value": 22,
                    "textStyle": {
                        "normal": {
                            "color": "rgb(118,81,1)"
                        }
                    }
                },
                {
                    "name": "\u5c71\u6942  ",
                    "value": 29,
                    "textStyle": {
                        "normal": {
                            "color": "rgb(125,157,109)"
                        }
                    }
                },
                {
                    "name": "\u78a7\u6843",
                    "value": 30,
                    "textStyle": {
                        "normal": {
                            "color": "rgb(126,98,92)"
                        }
                    }
                },
                {
                    "name": "\u78a7\u6843 ",
                    "value": 38,
                    "textStyle": {
                        "normal": {
                            "color": "rgb(133,88,157)"
                        }
                    }
                },
                {
                    "name": "\u78a7\u6843  ",
                    "value": 46,
                    "textStyle": {
                        "normal": {
                            "color": "rgb(44,140,105)"
                        }
                    }
                },
                {
                    "name": "\u91d1\u53f6\u590d\u53f6\u69ed",
                    "value": 40,
                    "textStyle": {
                        "normal": {
                            "color": "rgb(78,50,146)"
                        }
                    }
                },
                {
                    "name": "\u91d1\u53f6\u590d\u53f6\u69ed ",
                    "value": 41,
                    "textStyle": {
                        "normal": {
                            "color": "rgb(124,18,40)"
                        }
                    }
                },
                {
                    "name": "\u91d1\u53f6\u590d\u53f6\u69ed  ",
                    "value": 17,
                    "textStyle": {
                        "normal": {
                            "color": "rgb(7,11,96)"
                        }
                    }
                },
                {
                    "name": "\u9f99\u722a\u69d0",
                    "value": 30,
                    "textStyle": {
                        "normal": {
                            "color": "rgb(22,115,34)"
                        }
                    }
                },
                {
                    "name": "\u9f99\u722a\u69d0 ",
                    "value": 31,
                    "textStyle": {
                        "normal": {
                            "color": "rgb(145,95,22)"
                        }
                    }
                },
                {
                    "name": "\u9f99\u722a\u69d0  ",
                    "value": 20,
                    "textStyle": {
                        "normal": {
                            "color": "rgb(159,159,81)"
                        }
                    }
                },
                {
                    "name": "\u6a31\u82b1",
                    "value": 10,
                    "textStyle": {
                        "normal": {
                            "color": "rgb(0,127,142)"
                        }
                    }
                },
                {
                    "name": "\u6a31\u82b1 ",
                    "value": 15,
                    "textStyle": {
                        "normal": {
                            "color": "rgb(96,101,86)"
                        }
                    }
                },
                {
                    "name": "\u6a31\u82b1  ",
                    "value": 19,
                    "textStyle": {
                        "normal": {
                            "color": "rgb(100,91,31)"
                        }
                    }
                },
                {
                    "name": "\u67d3\u4e95\u5409\u91ce\u6a31",
                    "value": 20,
                    "textStyle": {
                        "normal": {
                            "color": "rgb(11,135,30)"
                        }
                    }
                },
                {
                    "name": "\u67d3\u4e95\u5409\u91ce\u6a31 ",
                    "value": 27,
                    "textStyle": {
                        "normal": {
                            "color": "rgb(143,16,18)"
                        }
                    }
                },
                {
                    "name": "\u67d3\u4e95\u5409\u91ce\u6a31  ",
                    "value": 30,
                    "textStyle": {
                        "normal": {
                            "color": "rgb(16,109,88)"
                        }
                    }
                },
                {
                    "name": "\u9ec4\u680c",
                    "value": 30,
                    "textStyle": {
                        "normal": {
                            "color": "rgb(118,114,18)"
                        }
                    }
                },
                {
                    "name": "\u9ec4\u680c ",
                    "value": 20,
                    "textStyle": {
                        "normal": {
                            "color": "rgb(1,112,60)"
                        }
                    }
                },
                {
                    "name": "\u9ec4\u680c  ",
                    "value": 20,
                    "textStyle": {
                        "normal": {
                            "color": "rgb(123,151,128)"
                        }
                    }
                }
            ],
            "drawOutOfBound": false,
            "textStyle": {
                "emphasis": {}
            }
        }
    ],
    "legend": [
        {
            "data": [],
            "selected": {},
            "show": true,
            "padding": 5,
            "itemGap": 10,
            "itemWidth": 25,
            "itemHeight": 14
        }
    ],
    "tooltip": {
        "show": true,
        "trigger": "item",
        "triggerOn": "mousemove|click",
        "axisPointer": {
            "type": "line"
        },
        "showContent": true,
        "alwaysShowContent": false,
        "showDelay": 0,
        "hideDelay": 100,
        "textStyle": {
            "fontSize": 14
        },
        "borderWidth": 0,
        "padding": 5
    },
    "title": [
        {
            "text": "植物园树木不完全统计",
            "padding": 5,
            "itemGap": 10
        }
    ]
};
        chart_11c49d00faa448b291d718f348be1d69.setOption(option_11c49d00faa448b291d718f348be1d69);
    </script>
<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"jsonPath":"/live2dw/assets/wanko.model.json"},"display":{"position":"right","width":200,"height":400,"hOffset":50,"vOffset":-95},"mobile":{"show":false},"react":{"opacity":0.7},"log":false});</script></body>
</html>

<h3 id="Aloha！-这只熊弹ukulele6个月啦"><a href="#Aloha！-这只熊弹ukulele6个月啦" class="headerlink" title="Aloha！ 这只熊弹ukulele6个月啦"></a>Aloha！ 这只熊弹ukulele6个月啦</h3><p><img src="/2021/12/28/随笔_2021年的小结/ukulele.jpg"></p>
</the>]]></content>
      <tags>
        <tag>随笔</tag>
      </tags>
  </entry>
</search>
