---
title: 象棋残局机器人五：象棋棋子分类模型
date: 2019-06-05 15:50:47
tags:
---




## 问题记录

### 1. 采集图像分辨率低导致分类错误

小伙伴的电脑摄像头采集视频流默认长宽比是16:9，显示的图片会自动在上下方补充两道黑条，并被发现无法通过cap.set(CAP_PROP_FRAME_HEIGHT，480)函数解决这个问题。  
这个问题导致采集图像的实际分辨率为640:360，所以采集的棋子照片中棋子比较模糊，同样的问题在重新调整摄像头位置没有调整好焦距时也会发生。
<div align=center>
<img src='象棋残局机器人五：象棋棋子分类模型\001.jpg' width=600 height=400>
</div>
默认分辨率是640*480，通过调高分辨率解决。  

``` bash
img = img[60:400,:,:]
img = cv2.resize(img, (640, 480))
```

### 2. 对于一些场景可以调整摄像头参数
特别注意有些摄像头参数设置后会保存，一旦修改后无法恢复到初始值，所以不要随意设置参数或在设置前注意记录摄像头参数的初始值。  
获取摄像头参数
``` bash
capture.get(CAP_PROP_FRAME_WIDTH)
capture.get(CAP_PROP_FRAME_HEIGHT)
capture.get(CAP_PROP_FPS)
capture.get(CAP_PROP_BRIGHTNESS)
capture.get(CAP_PROP_CONTRAST)
capture.get(CAP_PROP_SATURATION)
capture.get(CAP_PROP_HUE)
capture.get(CAP_PROP_EXPOSURE)
```
设置摄像头参数  
``` bash
capture.set(CAP_PROP_FRAME_WIDTH, 1080) #宽度 
capture.set(CAP_PROP_FRAME_HEIGHT, 960) #高度
capture.set(CAP_PROP_FPS, 30)           #帧率 帧/秒
capture.set(CAP_PROP_BRIGHTNESS, 1)     #亮度 1
capture.set(CAP_PROP_CONTRAST,40)       #对比度 40
capture.set(CAP_PROP_SATURATION, 50)    #饱和度 50
capture.set(CAP_PROP_HUE, 50)           #色调 50
capture.set(CAP_PROP_EXPOSURE, -6)      #曝光 50
```










