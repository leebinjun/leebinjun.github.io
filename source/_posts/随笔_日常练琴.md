---
title: æ¯æ—¥ç»ƒç´
date: 2020-03-01 02:25:33
tags:
  - éšç¬”
---

## èŠ‚æ‹å™¨

<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <!-- <title>èŠ‚æ‹å™¨</title> -->
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            let speed = 60, //èŠ‚æ‹é€Ÿåº¦
                arrClick = [],  //æµ‹é€Ÿæ—¶æ¯æ¬¡ç‚¹å‡»çš„é€Ÿåº¦ç»„æˆçš„æ•°ç»„ï¼ŒèŠ‚æ‹é€Ÿåº¦å–å…¶å¹³å‡å€¼
                clickTime = 0,  //æµ‹é€Ÿç‚¹å‡»è®¡æ—¶å™¨ï¼Œè¶…è¿‡ 5 ç§’æ¸…ç©ºæ•°ç»„
                s = Date.now(), //è®°å½•æ¯ä¸€æ¬¡ç‚¹å‡»çš„æ—¶é—´ï¼Œä¸‹ä¸€æ¬¡ç‚¹å‡»æ—¶ä¸æ­¤æ—¶é—´çš„é—´éš”ï¼Œæ¥è®¡ç®—é€Ÿåº¦
                time = 0,   //play è¿‡ç¨‹ timeout å˜é‡
                times = 0,  //44æ‹èŠ‚çš„è®¡æ•°å™¨
                isPlay = false, //æ˜¯å¦æ­£åœ¨æ’­æ”¾
                speedMsg = document.getElementById("speed"),    //é¡µé¢æ­£ä¸­é—´æ˜¾ç¤ºé€Ÿåº¦å€¼çš„å…ƒç´ 
                rangeValue = document.getElementById("rangeValue"), //æ»‘å—å…ƒç´ 
                elSpeed1 = document.getElementById("speed1"),
                elSpeed2 = document.getElementById("speed2"),
                showSpeed = () => {//æ˜¾ç¤ºé€Ÿåº¦å€¼çš„æ–¹æ³•ï¼ˆæˆ–è€…å« update æ–¹æ³•ï¼‰
                    rangeValue.value = speedMsg.innerText = speed;
                    elSpeed1.innerText = Math.round(speed / 2);
                    elSpeed2.innerText = speed * 2;
                }; 
            /** æµ‹é€ŸæŒ‰é’®ç‚¹å‡» */
            document.getElementById("btnTest").addEventListener("click", function () {
                let lastSpeed = Math.floor(60000 / (Date.now() - s));
                if (Math.abs(lastSpeed - arrClick[arrClick.length - 1]) > 30) { arrClick = []; }  //å¦‚æœç‚¹å‡»æ—¶é—´å’Œä¸Šæ¬¡å·®åˆ«è¾ƒå¤§ï¼Œåˆ™æ¸…é›¶é‡æµ‹
                arrClick.push(lastSpeed);
                if (arrClick.length > 31) arrClick.shift(); //æœ€å¤§å®¹é‡ä¿æŒåœ¨30ä¸ªï¼ˆé™¤å»ç¬¬ 1 ä¸ªä¸ç”¨ï¼‰
                //å¦‚æœæ•°é‡å¤šäº1ä¸ªåˆ™è®¡ç®—é€Ÿåº¦ï¼ˆç¬¬ 1 ä¸ªæ—¶é—´é—´éš”å¤ªä¹…ï¼Œä¸å‡†ç¡®ï¼Œå¼ƒä¹‹ï¼‰
                if (arrClick.length > 1) {
                    //å–ç¬¬2ä¸ªåˆ°æœ€åçš„å¹³å‡å€¼
                    speed = Math.ceil((arrClick.reduce((sum, n) => sum + n) - arrClick[0]) / (arrClick.length - 1));
                    console.log(arrClick.slice(1, arrClick.length).join("+") + " = " + (arrClick.reduce((s, n) => s + n) - arrClick[0]) + " / " + (arrClick.length - 1));
                    if (arrClick.length > 5) document.getElementById("msg").innerText = "å¤šç‚¹å‡ æ¬¡æ›´å‡†ç¡®...";
                }
                showSpeed();
                s = Date.now();
                document.getElementById("btnStop").click(); //æµ‹é€Ÿæ—¶åœæ­¢æ’­æ”¾
                //ä¸¤æ¬¡ç‚¹å‡»é—´éš”å¤§äº 3 ç§’å°±é‡ç½®
                window.clearTimeout(clickTime);
                clickTime = window.setTimeout(function () {
                    arrClick = [];
                    document.getElementById("msg").innerText = "";
                }, 3000);
            });
            /** æ’­æ”¾æŒ‰é’®ç‚¹å‡» */
            document.getElementById("btnPlay").addEventListener("click", function () {
                isPlay = true;
                play();
                this.style.display = "none";
                document.getElementById("btnStop").style.display = "inline-block";
            });
            /** åœæ­¢æŒ‰é’®ç‚¹å‡» */
            document.getElementById("btnStop").addEventListener("click", function () {
                window.clearTimeout(time);
                isPlay = false;
                this.style.display = "none";
                document.getElementById("btnPlay").style.display = "inline-block";
            });
            /** å‡å·æŒ‰é’®ç‚¹å‡» */
            document.getElementById("btnSub").addEventListener("click", function () {
                speed--;
                showSpeed();
            });
            /** åŠ å·æŒ‰é’®ç‚¹å‡» */
            document.getElementById("btnAdd").addEventListener("click", function () {
                speed++;
                showSpeed();
            });
            document.getElementById("speed1").addEventListener("click",function(){
                speed = this.innerText * 1;
                showSpeed();
            })
            document.getElementById("speed2").addEventListener("click",function(){
                speed = this.innerText * 1;
                showSpeed();
            })
            /** æ»‘åŠ¨æ¡æ›´æ”¹ */
            rangeValue.addEventListener("change", function () {
                speed = this.value * 1;
                showSpeed();
            });
            /** æ’­æ”¾ */
            let play = () => {
                window.clearTimeout(time);
                playsound();
                if (isPlay) {
                    time = window.setTimeout(play, Math.floor(60000 / speed));
                };
            }
            let audioCtx = new AudioContext();
            /** å‘å£° */
            let playsound = () => {
                times++;
                let oscillator = audioCtx.createOscillator();
                let gainNode = audioCtx.createGain();
                oscillator.connect(gainNode);
                gainNode.connect(audioCtx.destination);
                oscillator.type = 'sine';
                if (times%4){
                    oscillator.frequency.setValueAtTime(200, audioCtx.currentTime);
                }
                else
                {
                    oscillator.frequency.setValueAtTime(700, audioCtx.currentTime);
                    times=0;
                }
                oscillator.frequency.linearRampToValueAtTime(50, audioCtx.currentTime + 0.1);
                gainNode.gain.setValueAtTime(0, audioCtx.currentTime);
                gainNode.gain.linearRampToValueAtTime(1, audioCtx.currentTime + 0.01);
                gainNode.gain.exponentialRampToValueAtTime(0.001, audioCtx.currentTime + 0.5);
                oscillator.start(audioCtx.currentTime);
                oscillator.stop(audioCtx.currentTime + 0.5);
            }
        });
    </script>
</head>

<body>
    <style>
        *{padding: 0;margin: 0;font-family: Cambria, "å¾®è½¯é›…é»‘";}
        /* header{background-image: linear-gradient(to bottom,#4387fd,#4683ea);padding: 20px;font-size: 30px;color: #fff;} */
        footer{padding: 20px;text-align: center;color: #ccc;}
        footer>a{color: #999;}
        .section{text-align: center;padding: 20px;width: 300px;margin: auto;}
        .sectionsection{margin: 30px auto;}
        .speed{display: flex;justify-content:space-between;align-items: center;}
        .sectionbutton {padding: 5px 10px;}
        #btnTest {padding: 15px 30px;font-size: 20px;}
        #btnPlay,#btnStop{font-size: 50px;border: 0;background: transparent;}
        #btnStop {display: none;}
        #speed{font-size: 45px;}
        #speed1,#speed2{color: #999;cursor: pointer;}
        #speed1:hover,#speed2:hover{color: #333;}
        #msg{height: 20px;padding-top: 5px; font-size: 9px;color: gray;}
    </style>
    <header>èŠ‚æ‹å™¨</header>
    <section class="section">
        <button class="sectionbutton" id="btnTest">è¿ç»­ç‚¹å‡»æµ‹é€Ÿ</button>
        <div id="msg"></div>
        <section class='sectionsection'>
            <div class="speed">
                <button id="btnSub">â–</button>
                <div id="speed1">30</div>
                <div id="speed">60</div>
                <div id="speed2">120</div>
                <button id="btnAdd">â•</button>
            </div>
            <div><input type="range" style="width:100%;" min="20" max="300" id="rangeValue" value="60"></div>
        </section>
        <button id="btnPlay">â–¶ï¸</button>
        <button id="btnStop">â¹ï¸</button>
    </section>
    <footer>2018-02-05 by <a href="mailto://zk1218@gmail.com">ğŸ“§ zhangkai</a></footer>
</body>

</html>


## éŸ³é˜¶ç»ƒä¹ 

**æ•™å­¦é¢‘é“**
* Wenå‰ä»–èªŒ  
https://www.youtube.com/user/k7256580

<img src="éšç¬”_æ—¥å¸¸ç»ƒç´\0.png" >

**æ³¨æ„**
* ä¸»éŸ³å¼€å§‹ï¼Œä¸»éŸ³ç»“æŸï¼Œä¸»éŸ³æ˜¯åŸºå‡†ç‚¹
* æ¨¡è¿›ç»ƒä¹ (ä¸‰ä¸ªéŸ³ä¸€ç»„ã€å››ä¸ªéŸ³ä¸€ç»„ã€ä¸‰åº¦éŸ³æ¨¡è¿›)
* å”±å‡ºæ¥
* èŠ‚æ‹å™¨

**å»ºè®®**
* ä»¥ä¸€åˆ†é’Ÿä¸ºæœ€å°ç»ƒä¹ å•ä½
* ç†Ÿæ‚‰ä¸€ä¸ªpatternåå†å­¦ä¸‹ä¸€ä¸ª
* ç”¨è„‘è¢‹ç»ƒä¹ 


## æˆ‘çš„å‰ä»–è°±

* leebinjun/my-guitar-tab: letâ€˜s play the guitar together : )  
https://github.com/leebinjun/my-guitar-tab


## å¸¸è§çš„å’Œå¼¦å¥—è·¯

* ä¸‡èƒ½å’Œå¼¦15634325  
æ‹¿èµ·å‰ä»–ç”¨è¿™ä¸ªå¥—è·¯èµ°ä¸€éï¼Œå‘ç°å®ƒçš„å’Œå£°å˜åŒ–æ˜¯å¦‚æ­¤çš„é¡ºç•…ï¼Œå¦‚æœä½ è‡ªå·±åˆ›ä½œçš„è¯å¯ä»¥å°è¯•ä¸€ä¸‹è¿™ä¸ªå¥—è·¯ï¼Œä½†æ˜¯å®ƒä¹Ÿæœ‰ç¼ºç‚¹ï¼Œå°±æ˜¯å¤§å®¶éƒ½ç”¨å°±æ˜¾å¾—æ²¡æœ‰ç‰¹0è‰²ã€‚
* ä¸‡èƒ½å˜ä½“13634325  
è¿™ä¸ªå¥—è·¯æ˜¯å°†ç¬¬äºŒä¸ªå’Œå¼¦å˜æˆäº†IIIçº§å’Œå¼¦ï¼Œæˆ‘ä»¬éƒ½çŸ¥é“Iã€IVã€Væ˜¯å¤§ä¸‰å’Œå¼¦ï¼Œå’Œå¼¦è‰²å½©å¾ˆé˜³å…‰ã€å¾ˆæ˜äº®ï¼ŒIIã€IIIã€VIçº§å’Œå¼¦æ˜¯å°ä¸‰å’Œå¼¦ï¼Œè‰²å½©å¾ˆé˜´æŸ”ã€å¾ˆæš—æ·¡ï¼Œå¤§å®¶å°è¯•ä¸€ä¸‹è¿™ä¸ªå¥—è·¯ï¼Œçœ‹çœ‹æ„Ÿè§‰æœ‰ä»€ä¹ˆä¸åŒã€‚
* 1645+ä¸‡èƒ½  
ä¸»æ­Œéƒ¨åˆ†ä½¿ç”¨1645ï¼Œå‰¯æ­Œéƒ¨åˆ†ä½¿ç”¨ä¸‡èƒ½å’Œå¼¦ï¼Œè¿™æ ·å¯ä»¥æ·»åŠ ä¸€äº›å˜åŒ–ã€‚
* 1451  
è¿™ä¸ªå¥—è·¯åªä½¿ç”¨äº†å¤§ä¸‰å’Œå¼¦ï¼Œæ­£èƒ½é‡æ»¡æ»¡å•Šï¼
* 1625  
è¿™ä¸ªå¥—è·¯å°†IVçº§æ¢æˆäº†IIçº§ï¼Œå¦‚æœæ˜¯Cè°ƒçš„è¯å°±çœå»äº†å¤§æ¨ªæŒ‰Fï¼Œåˆå­¦è€…ç»ƒç»ƒè¿™ä¸ªå¥—è·¯ï¼Œã€ŠäºŒæœˆåå››ã€‹å°±æ˜¯è¿™ä¸ªå¥—è·¯ã€‚
* 1645å˜ä½“  
Vçº§å’Œå¼¦ä½¿ç”¨V7ä»£æ›¿ï¼ŒV7å’Œå¼¦å¬èµ·æ¥æä¸ç¨³å®šï¼Œè®©äººéå¸¸æƒ³æŠŠå®ƒæ‹–å›æ¥ï¼Œåé¢æ¥ç€å°±æ˜¯Içº§å’Œå¼¦ï¼Œç¬é—´æ»¡è¶³äº†ã€‚
* 15634145  
ä½¿ç”¨è¿™ä¸ªå¥—è·¯æ­Œæ›²ä¹Ÿå¾ˆå¤šï¼Œã€Šå¼€ä¸äº†å£ã€‹ã€Šç®€å•çˆ±ã€‹ã€Šçˆ±ä¸€ä¸ªå¥½éš¾ã€‹ã€Šçº¦å®šã€‹ã€Šæ·±å‘¼å¸ã€‹ã€Šå…‰è¾‰å²æœˆã€‹ï¼Œå…¶å®æ˜¯æ¥è‡ªå·±æ¬§æ´²çš„ç»å…¸å’Œå£°ã€‚
* 17654325  
å¾ˆå¤šæµè¡Œå–œæ¬¢ç”¨çš„å’Œå¼¦èµ°å‘ï¼Œç°ä»£å¾ˆå¤šæ­Œéƒ½æ˜¯è¿™æ ·çš„èµ°å‘ï¼Œä¾‹å¦‚ã€Šå¥½å¿ƒåˆ†æ‰‹ã€‹ã€ã€ŠèŠèŠ±å°ã€‹ã€ã€ŠæŒ¥ç€ç¿…è†€çš„å¥³å­©ã€‹ã€ã€Šé¥®æ­Œã€‹ï¼Œå…¶å®è¿™ä¸ªèµ°å‘å°±å«åšå¡å†œã€‚



